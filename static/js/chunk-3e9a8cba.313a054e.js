(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e9a8cba"],{2964:function(t,a,e){},"2f83":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dm-khohang-layout"},[e("div",{staticClass:"page-header"},[e("div",{staticClass:"breadcrumb-wrap"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[t._v("Danh mục chung")]),e("el-breadcrumb-item",[t._v("Kho & Nhóm hàng")])],1)],1)]),e("div",{staticClass:"top-pane",style:{height:t.topHeightPercent+"%"}},[e("KhoHangList",{ref:"khoList",attrs:{selectedKho:t.selectedKho},on:{select:t.onSelectKho,add:t.onAddKho,edit:t.onEditKho}})],1),e("div",{staticClass:"splitter",on:{mousedown:t.startDrag}}),e("div",{staticClass:"bottom-pane",style:{height:100-t.topHeightPercent+"%"}},[e("NhomHangList",{ref:"nhomList",attrs:{selectedKho:t.selectedKho,selectedNhom:t.selectedNhom},on:{select:t.onSelectNhom,add:t.onAddNhom,edit:t.onEditNhom}})],1),e("KhoHangForm",{attrs:{visible:t.khoFormVisible,isEdit:t.isEditKho,khoData:t.editingKho},on:{"update:visible":function(a){t.khoFormVisible=a},close:function(a){t.khoFormVisible=!1},success:t.handleKhoFormSuccess}})],1)},r=[],i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"khohang-list-container"},[e("el-card",[e("div",{staticClass:"toolbar"},[e("el-input",{staticClass:"search-input",attrs:{placeholder:"Tìm kiếm mã kho hoặc tên kho",clearable:"",size:"mini"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSearch(a)}},model:{value:t.searchQuery,callback:function(a){t.searchQuery=a},expression:"searchQuery"}}),e("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.handleSearch}},[t._v("Tìm kiếm")])],1),e("div",{staticClass:"table-scroll-x"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableDataWithAddRow,border:"","empty-text":"Không có dữ liệu","max-height":"500","highlight-current-row":"",size:"mini","row-class-name":t.rowClassName},on:{"current-change":t.handleCurrentChange}},[e("el-table-column",{attrs:{type:"index",label:"STT",width:"70",align:"center",index:t.indexMethod}}),e("el-table-column",{attrs:{prop:"ma_kho",label:"Mã kho",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t.isEditing(a.row)?[e("el-input",{attrs:{maxlength:"10",disabled:"edit"===t.editMode,size:"mini"},model:{value:t.editForm.ma_kho,callback:function(a){t.$set(t.editForm,"ma_kho",a)},expression:"editForm.ma_kho"}})]:[t._v(" "+t._s(a.row.ma_kho)+" ")]]}}])}),e("el-table-column",{attrs:{prop:"ten_kho",label:"Tên kho","min-width":"200","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return[t.isEditing(a.row)?[e("el-input",{attrs:{maxlength:"100",size:"mini"},model:{value:t.editForm.ten_kho,callback:function(a){t.$set(t.editForm,"ten_kho",a)},expression:"editForm.ten_kho"}})]:[e("span",{staticClass:"nowrap-ellipsis"},[t._v(t._s(a.row.ten_kho))])]]}}])}),e("el-table-column",{attrs:{prop:"sohieutk",label:"Số hiệu TK",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t.isEditing(a.row)?[e("el-input",{attrs:{maxlength:"10",size:"mini"},model:{value:t.editForm.sohieutk,callback:function(a){t.$set(t.editForm,"sohieutk",a)},expression:"editForm.sohieutk"}})]:[t._v(" "+t._s(a.row.sohieutk)+" ")]]}}])}),e("el-table-column",{attrs:{label:"Action",width:"200",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[t.isEditing(a.row)?[e("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",size:"mini"},on:{click:function(e){return t.saveEdit(a.row)}}}),e("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:"",size:"mini"},on:{click:t.cancelEdit}})]:a.row._isAddRow?[e("el-tooltip",{attrs:{content:"Thêm kho",placement:"top"}},[e("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:"",size:"mini"},on:{click:t.startAdd}})],1)]:[e("el-tooltip",{attrs:{content:"Sửa kho",placement:"top"}},[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(e){return t.startEdit(a.row)}}})],1)]]}}])})],1)],1),e("div",{staticClass:"pagination-bar"},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper","current-page":t.pagination.page,"page-size":t.pagination.pageSize,total:t.pagination.total},on:{"current-change":t.handlePageChange}})],1)])],1)},o=[],s=e("5530"),l=e("c14f"),c=e("1da1"),u=e("2909"),h=(e("99af"),e("b775")),m=e("5f87"),d="https://klktaccouting.onrender.com/api",p={name:"KhoHangList",props:{selectedKho:Object},data:function(){return{khoList:[],loading:!1,searchQuery:"",debounceTimer:null,pagination:{page:1,pageSize:10,total:0},editingKey:null,editForm:{},editMode:"",isAdding:!1}},watch:{searchQuery:function(){var t=this;this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((function(){t.handleSearch()}),400)}},computed:{tableDataWithAddRow:function(){var t={_isAddRow:!0};return this.isAdding?[].concat(Object(u["a"])(this.khoList),[this.editForm]):[].concat(Object(u["a"])(this.khoList),[t])}},mounted:function(){this.fetchKhoHang()},methods:{fetchKhoHang:function(){var t=this;return Object(c["a"])(Object(l["a"])().m((function a(){var e,n;return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:return t.loading=!0,a.p=1,e={table_code:"tbldmkhohang",sohieutk:t.searchQuery||"",ma_kho:t.searchQuery||"",ten_kho:t.searchQuery||"",page:t.pagination.page,size:t.pagination.pageSize},a.n=2,h["a"].post("".concat(d,"/dm/search"),e);case 2:n=a.v,t.khoList=n.data&&n.data.items?n.data.items:[],t.pagination.total=n.data&&n.data.total?n.data.total:0,a.n=4;break;case 3:a.p=3,a.v,t.khoList=[],t.pagination.total=0,t.$message&&t.$message.error("Lỗi tải danh sách kho hàng");case 4:return a.p=4,t.loading=!1,a.f(4);case 5:return a.a(2)}}),a,null,[[1,3,4,5]])})))()},handleSearch:function(){this.pagination.page=1,this.fetchKhoHang()},handlePageChange:function(t){this.pagination.page=t,this.fetchKhoHang()},indexMethod:function(t){return(this.pagination.page-1)*this.pagination.pageSize+t+1},rowClassName:function(t){var a=t.row;return this.selectedKho&&a.ma_kho===this.selectedKho.ma_kho?"selected-row":""},isEditing:function(t){return this.editingKey===t.ma_kho||this.isAdding&&t===this.editForm},startEdit:function(t){this.editingKey=t.ma_kho,this.editMode="edit",this.editForm=Object(s["a"])({},t)},startAdd:function(){var t=Object(m["b"])();this.editingKey="__add__",this.editMode="add",this.isAdding=!0,this.$emit("select",null),this.editForm={mst:t.user.user.taxCode,sohieutk:"",ma_kho:"",ten_kho:"",trang_thai:1}},saveEdit:function(t){var a=this;return Object(c["a"])(Object(l["a"])().m((function t(){var e;return Object(l["a"])().w((function(t){while(1)switch(t.n){case 0:if(a.editForm.ma_kho&&a.editForm.sohieutk&&a.editForm.ten_kho){t.n=1;break}return a.$message.error("Vui lòng nhập đủ thông tin"),t.a(2);case 1:return t.p=1,e=Object(s["a"])(Object(s["a"])({},a.editForm),{},{table_code:"tbldmkhohang"}),t.n=2,h["a"].post("".concat(d,"/dm/upsert"),e);case 2:a.$message.success("add"===a.editMode?"Thêm mới thành công":"Cập nhật thành công"),a.cancelEdit(),a.fetchKhoHang(),t.n=4;break;case 3:t.p=3,t.v,a.$message.error("Lỗi lưu kho hàng");case 4:return t.a(2)}}),t,null,[[1,3]])})))()},cancelEdit:function(){this.editingKey=null,this.editForm={},this.editMode="",this.isAdding=!1},handleCurrentChange:function(t){t&&(t._isAddRow||this.isAdding||"add"===this.editMode?this.$emit("select",null):this.$emit("select",t))}}},g=p,_=(e("afda"),e("2877")),f=Object(_["a"])(g,i,o,!1,null,"5f246cea",null),b=f.exports,v=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"nhomhang-list-container"},[e("el-card",[e("div",{staticClass:"toolbar"},[e("el-input",{staticClass:"search-input",attrs:{placeholder:"Tìm kiếm mã nhóm hoặc tên nhóm",clearable:"",disabled:!t.selectedKho,size:"mini"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSearch(a)}},model:{value:t.searchQuery,callback:function(a){t.searchQuery=a},expression:"searchQuery"}}),e("el-button",{attrs:{type:"primary",icon:"el-icon-search",disabled:!t.selectedKho,size:"mini"},on:{click:t.handleSearch}},[t._v("Tìm kiếm")])],1),t.selectedKho?e("div",{staticClass:"table-scroll-x"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableDataWithAddRow,border:"","empty-text":"Không có dữ liệu","max-height":"500","highlight-current-row":"",size:"mini","row-class-name":t.rowClassName},on:{"current-change":function(a){return t.$emit("select",a)}}},[e("el-table-column",{attrs:{type:"index",label:"STT",width:"70",align:"center",index:t.indexMethod}}),e("el-table-column",{attrs:{prop:"ma_nhom",label:"Mã nhóm",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t.isEditing(a.row)?[e("el-input",{attrs:{maxlength:"20",disabled:"edit"===t.editMode,size:"mini"},model:{value:t.editForm.ma_nhom,callback:function(a){t.$set(t.editForm,"ma_nhom",a)},expression:"editForm.ma_nhom"}})]:[t._v(" "+t._s(a.row.ma_nhom)+" ")]]}}])}),e("el-table-column",{attrs:{prop:"ten_nhom",label:"Tên nhóm","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[t.isEditing(a.row)?[e("el-input",{attrs:{maxlength:"50",size:"mini"},model:{value:t.editForm.ten_nhom,callback:function(a){t.$set(t.editForm,"ten_nhom",a)},expression:"editForm.ten_nhom"}})]:[e("span",{staticClass:"wrap-text"},[t._v(t._s(a.row.ten_nhom))])]]}}])}),e("el-table-column",{attrs:{prop:"sohieutk",label:"Số hiệu TK",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t.isEditing(a.row)?[e("el-input",{attrs:{maxlength:"10",size:"mini"},model:{value:t.editForm.sohieutk,callback:function(a){t.$set(t.editForm,"sohieutk",a)},expression:"editForm.sohieutk"}})]:[t._v(" "+t._s(a.row.sohieutk)+" ")]]}}])}),e("el-table-column",{attrs:{prop:"ma_kho",label:"Mã kho",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t.isEditing(a.row)?[e("el-input",{attrs:{maxlength:"10",size:"mini",disabled:!0},model:{value:t.editForm.ma_kho,callback:function(a){t.$set(t.editForm,"ma_kho",a)},expression:"editForm.ma_kho"}})]:[t._v(" "+t._s(a.row.ma_kho)+" ")]]}}])}),e("el-table-column",{attrs:{label:"Vật tư",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row._isAddRow?t._e():[e("el-tooltip",{attrs:{content:"Xem vật tư của nhóm",placement:"top"}},[e("el-button",{staticStyle:{"font-size":"11px",padding:"4px 8px"},attrs:{type:"info",size:"mini"},on:{click:function(e){return t.openVatTuDrawer(a.row)}}},[t._v(" Vật tư ("),e("span",{staticClass:"vat-tu-count"},[t._v(t._s(a.row.total_vattu||0))]),t._v(") ")])],1)]]}}])}),e("el-table-column",{attrs:{label:"Tài sản",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row._isAddRow?t._e():[e("el-tooltip",{attrs:{content:"Xem tài sản của nhóm",placement:"top"}},[e("el-button",{staticStyle:{"font-size":"11px",padding:"4px 8px"},attrs:{type:"warning",size:"mini"},on:{click:function(e){return t.openTaiSanDrawer(a.row)}}},[t._v(" Tài sản ("),e("span",{staticClass:"tai-san-count"},[t._v(t._s(a.row.total_taisan||0))]),t._v(") ")])],1)]]}}])}),e("el-table-column",{attrs:{label:"Action",width:"200",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[t.isEditing(a.row)?[e("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",size:"mini"},on:{click:function(e){return t.saveEdit(a.row)}}}),e("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:"",size:"mini"},on:{click:t.cancelEdit}})]:a.row._isAddRow?[e("el-tooltip",{attrs:{content:"Thêm nhóm",placement:"top"}},[e("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:"",size:"mini"},on:{click:t.startAdd}})],1)]:[e("el-tooltip",{attrs:{content:"Sửa nhóm",placement:"top"}},[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(e){return t.startEdit(a.row)}}})],1),e("el-tooltip",{attrs:{content:"Xóa nhóm",placement:"top"}},[e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.deleteRow(a.row)}}})],1),e("el-tooltip",{attrs:{content:"Thêm vật tư",placement:"top"}},[e("el-button",{attrs:{type:"success",icon:"el-icon-box",circle:"",size:"mini"},on:{click:function(e){return t.goToAddVatTu(a.row)}}})],1),e("el-tooltip",{attrs:{content:"Thêm tài sản",placement:"top"}},[e("el-button",{attrs:{type:"warning",icon:"el-icon-office-building",circle:"",size:"mini"},on:{click:function(e){return t.goToAddTaiSan(a.row)}}})],1)]]}}])})],1)],1):e("div",{staticClass:"empty"},[t._v("Chọn kho hàng để xem nhóm hàng")]),t.selectedKho?e("div",{staticClass:"pagination-bar"},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper","current-page":t.pagination.page,"page-size":t.pagination.pageSize,total:t.pagination.total},on:{"current-change":t.handlePageChange}})],1):t._e()]),e("el-drawer",{attrs:{visible:t.vatTuDrawer.visible,size:"70%"},on:{"update:visible":function(a){return t.$set(t.vatTuDrawer,"visible",a)},close:t.closeVatTuDrawer}},[e("div",{staticClass:"custom-drawer-title"},[t._v(" Danh sách vật tư của nhóm "),e("span",[t._v(t._s(t.vatTuDrawer.ten_nhom))]),t._v(" ("),e("span",{staticClass:"manhom-highlight"},[t._v(t._s(t.vatTuDrawer.ma_nhom))]),t._v(") - Kho: "),e("span",{staticClass:"makho-highlight"},[t._v(t._s(t.vatTuDrawer.ma_kho))])]),e("div",{staticClass:"drawer-content-padding"},[e("div",{staticStyle:{"margin-bottom":"20px",display:"flex",gap:"10px","align-items":"center","justify-content":"space-between"}},[e("div",{staticStyle:{display:"flex",gap:"10px","align-items":"center"}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"Nhập mã vật tư hoặc tên vật tư để tìm kiếm",clearable:""},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.fetchVatTu(a)}},model:{value:t.vatTuDrawer.searchQuery,callback:function(a){t.$set(t.vatTuDrawer,"searchQuery",a)},expression:"vatTuDrawer.searchQuery"}}),e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.fetchVatTu}},[t._v("Tìm kiếm")])],1),e("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(a){return t.openVatTuForm(!1)}}},[t._v("Thêm mới")])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.vatTuDrawer.loading,expression:"vatTuDrawer.loading"}],staticStyle:{width:"100%"},attrs:{data:t.vatTuDrawer.materials,border:"","empty-text":"Không có dữ liệu","max-height":"400"}},[e("el-table-column",{attrs:{prop:"ma_vattu",label:"Mã vật tư",width:"120"}}),e("el-table-column",{attrs:{prop:"ten_vattu",label:"Tên vật tư","min-width":"200"}}),e("el-table-column",{attrs:{prop:"dvt",label:"Đơn vị tính",width:"100"}}),e("el-table-column",{attrs:{prop:"luong_dau_ky",label:"Lượng đầu kỳ",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t.formatNumber(a.row.luong_dau_ky))+" ")]}}])}),e("el-table-column",{attrs:{prop:"gia_tri_dau_ky",label:"Giá trị đầu kỳ",width:"130",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t.formatCurrency(a.row.gia_tri_dau_ky))+" ")]}}])}),e("el-table-column",{attrs:{prop:"trang_thai",label:"Trạng thái",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:1===a.row.trang_thai?"success":"danger"}},[t._v(" "+t._s(1===a.row.trang_thai?"Hoạt động":"Vô hiệu hóa")+" ")])]}}])}),e("el-table-column",{attrs:{align:"center",label:"Action",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"action-btn-group"},[e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(e){return t.openVatTuForm(!0,a.row)}}},[t._v("Sửa")]),e("el-button",{attrs:{type:1===a.row.trang_thai?"danger":"warning",size:"small",icon:1===a.row.trang_thai?"el-icon-delete":"el-icon-check"},on:{click:function(e){1===a.row.trang_thai?t.handleDisableVatTu(a.row):t.handleEnableVatTu(a.row)}}},[t._v(" "+t._s(1===a.row.trang_thai?"Disable":"Enable")+" ")])],1)]}}])})],1),e("div",{staticStyle:{"margin-top":"20px","text-align":"right"}},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper","current-page":t.vatTuDrawer.pagination.page,"page-size":t.vatTuDrawer.pagination.pageSize,total:t.vatTuDrawer.pagination.total},on:{"current-change":t.handleVatTuPageChange}})],1),t.vatTuDrawer.showForm?e("div",{staticStyle:{"margin-top":"24px",background:"#fafbfc",padding:"24px","border-radius":"8px"}},[e("el-form",{ref:"vatTuForm",attrs:{model:t.vatTuDrawer.formData,rules:t.vatTuDrawer.rules,"label-width":"140px","label-position":"left"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"MST",prop:"mst"}},[e("el-input",{attrs:{placeholder:"MST",clearable:"",readonly:""},model:{value:t.vatTuDrawer.formData.mst,callback:function(a){t.$set(t.vatTuDrawer.formData,"mst",a)},expression:"vatTuDrawer.formData.mst"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Số hiệu TK",prop:"sohieutk"}},[e("el-input",{attrs:{placeholder:"Số hiệu tài khoản",clearable:"",readonly:""},model:{value:t.vatTuDrawer.formData.sohieutk,callback:function(a){t.$set(t.vatTuDrawer.formData,"sohieutk",a)},expression:"vatTuDrawer.formData.sohieutk"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã kho",prop:"ma_kho"}},[e("el-input",{attrs:{placeholder:"Mã kho",clearable:"",readonly:""},model:{value:t.vatTuDrawer.formData.ma_kho,callback:function(a){t.$set(t.vatTuDrawer.formData,"ma_kho",a)},expression:"vatTuDrawer.formData.ma_kho"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã nhóm",prop:"ma_nhom"}},[e("el-input",{attrs:{placeholder:"Mã nhóm",clearable:"",readonly:""},model:{value:t.vatTuDrawer.formData.ma_nhom,callback:function(a){t.$set(t.vatTuDrawer.formData,"ma_nhom",a)},expression:"vatTuDrawer.formData.ma_nhom"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã vật tư",prop:"ma_vattu"}},[e("el-input",{attrs:{placeholder:"Nhập mã vật tư",clearable:""},model:{value:t.vatTuDrawer.formData.ma_vattu,callback:function(a){t.$set(t.vatTuDrawer.formData,"ma_vattu",a)},expression:"vatTuDrawer.formData.ma_vattu"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Tên vật tư",prop:"ten_vattu"}},[e("el-input",{attrs:{placeholder:"Nhập tên vật tư",clearable:""},model:{value:t.vatTuDrawer.formData.ten_vattu,callback:function(a){t.$set(t.vatTuDrawer.formData,"ten_vattu",a)},expression:"vatTuDrawer.formData.ten_vattu"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Đơn vị tính",prop:"dvt"}},[e("el-input",{attrs:{placeholder:"Nhập đơn vị tính",clearable:""},model:{value:t.vatTuDrawer.formData.dvt,callback:function(a){t.$set(t.vatTuDrawer.formData,"dvt",a)},expression:"vatTuDrawer.formData.dvt"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Năm",prop:"nam"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:2e3,max:2100,placeholder:"Năm"},model:{value:t.vatTuDrawer.formData.nam,callback:function(a){t.$set(t.vatTuDrawer.formData,"nam",a)},expression:"vatTuDrawer.formData.nam"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Lượng đầu kỳ",prop:"luong_dau_ky"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:t.vatTuDrawer.formData.luong_dau_ky,callback:function(a){t.$set(t.vatTuDrawer.formData,"luong_dau_ky",a)},expression:"vatTuDrawer.formData.luong_dau_ky"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Giá trị đầu kỳ",prop:"gia_tri_dau_ky"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:t.vatTuDrawer.formData.gia_tri_dau_ky,callback:function(a){t.$set(t.vatTuDrawer.formData,"gia_tri_dau_ky",a)},expression:"vatTuDrawer.formData.gia_tri_dau_ky"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Hệ số quy đổi",prop:"he_so_quy_doi"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:t.vatTuDrawer.formData.he_so_quy_doi,callback:function(a){t.$set(t.vatTuDrawer.formData,"he_so_quy_doi",a)},expression:"vatTuDrawer.formData.he_so_quy_doi"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã đơn vị quy đổi",prop:"ma_don_vi_quy_doi"}},[e("el-input",{attrs:{placeholder:"Nhập mã đơn vị quy đổi",clearable:""},model:{value:t.vatTuDrawer.formData.ma_don_vi_quy_doi,callback:function(a){t.$set(t.vatTuDrawer.formData,"ma_don_vi_quy_doi",a)},expression:"vatTuDrawer.formData.ma_don_vi_quy_doi"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Trạng thái",prop:"trang_thai"}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"Hoạt động","inactive-text":"Ngừng hoạt động"},model:{value:t.vatTuDrawer.formData.trang_thai,callback:function(a){t.$set(t.vatTuDrawer.formData,"trang_thai",a)},expression:"vatTuDrawer.formData.trang_thai"}})],1)],1)],1),e("el-form-item",{attrs:{label:"Vị trí lưu trữ",prop:"vi_tri_luu_tru"}},[e("el-input",{attrs:{placeholder:"Nhập vị trí lưu trữ",clearable:""},model:{value:t.vatTuDrawer.formData.vi_tri_luu_tru,callback:function(a){t.$set(t.vatTuDrawer.formData,"vi_tri_luu_tru",a)},expression:"vatTuDrawer.formData.vi_tri_luu_tru"}})],1),e("el-form-item",{attrs:{label:"Ghi chú",prop:"ghi_chu"}},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"Nhập ghi chú (nếu có)"},model:{value:t.vatTuDrawer.formData.ghi_chu,callback:function(a){t.$set(t.vatTuDrawer.formData,"ghi_chu",a)},expression:"vatTuDrawer.formData.ghi_chu"}})],1)],1),e("div",{staticStyle:{"text-align":"left","margin-top":"16px"}},[e("el-button",{on:{click:t.closeVatTuForm}},[t._v("Hủy")]),e("el-button",{attrs:{type:"primary",loading:t.vatTuDrawer.formLoading},on:{click:t.submitVatTuForm}},[t._v(" "+t._s(t.vatTuDrawer.isEdit?"Cập nhật":"Thêm mới")+" ")])],1)],1):t._e()],1)]),e("el-drawer",{attrs:{visible:t.taiSanDrawer.visible,size:"70%"},on:{"update:visible":function(a){return t.$set(t.taiSanDrawer,"visible",a)},close:t.closeTaiSanDrawer}},[e("div",{staticClass:"custom-drawer-title"},[t._v(" Danh sách tài sản của nhóm "),e("span",[t._v(t._s(t.taiSanDrawer.ten_nhom))]),t._v(" ("),e("span",{staticClass:"manhom-highlight"},[t._v(t._s(t.taiSanDrawer.ma_nhom))]),t._v(") - Kho: "),e("span",{staticClass:"makho-highlight"},[t._v(t._s(t.taiSanDrawer.ma_kho))])]),e("div",{staticClass:"drawer-content-padding"},[e("div",{staticStyle:{"margin-bottom":"20px",display:"flex",gap:"10px","align-items":"center","justify-content":"space-between"}},[e("div",{staticStyle:{display:"flex",gap:"10px","align-items":"center"}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"Nhập mã tài sản hoặc tên tài sản để tìm kiếm",clearable:""},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.fetchTaiSan(a)}},model:{value:t.taiSanDrawer.searchQuery,callback:function(a){t.$set(t.taiSanDrawer,"searchQuery",a)},expression:"taiSanDrawer.searchQuery"}}),e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.fetchTaiSan}},[t._v("Tìm kiếm")])],1),e("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(a){return t.openTaiSanForm(!1)}}},[t._v("Thêm mới")])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.taiSanDrawer.loading,expression:"taiSanDrawer.loading"}],staticStyle:{width:"100%"},attrs:{data:t.taiSanDrawer.assets,border:"","empty-text":"Không có dữ liệu","max-height":"400"}},[e("el-table-column",{attrs:{prop:"ma_taisan",label:"Mã tài sản",width:"120"}}),e("el-table-column",{attrs:{prop:"ten_taisan",label:"Tên tài sản","min-width":"200"}}),e("el-table-column",{attrs:{prop:"dvt",label:"Đơn vị tính",width:"100"}}),e("el-table-column",{attrs:{prop:"so_the",label:"Số thẻ",width:"120"}}),e("el-table-column",{attrs:{prop:"ngaylap_the",label:"Ngày lập thẻ",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t.formatDate(a.row.ngaylap_the))+" ")]}}])}),e("el-table-column",{attrs:{prop:"hang_taisan",label:"Hãng tài sản",width:"120"}}),e("el-table-column",{attrs:{prop:"nam_sanxuat",label:"Năm sản xuất",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t.formatNumber(a.row.nam_sanxuat))+" ")]}}])}),e("el-table-column",{attrs:{prop:"soluong_dauky",label:"Số lượng đầu kỳ",width:"130",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t.formatNumber(a.row.soluong_dauky))+" ")]}}])}),e("el-table-column",{attrs:{prop:"nguyengia",label:"Nguyên giá",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t.formatCurrency(a.row.nguyengia))+" ")]}}])}),e("el-table-column",{attrs:{prop:"giatri_conlai",label:"Giá trị còn lại",width:"130",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t.formatCurrency(a.row.giatri_conlai))+" ")]}}])}),e("el-table-column",{attrs:{prop:"trang_thai",label:"Trạng thái",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:1===a.row.trang_thai?"success":"danger"}},[t._v(" "+t._s(1===a.row.trang_thai?"Hoạt động":"Vô hiệu hóa")+" ")])]}}])}),e("el-table-column",{attrs:{align:"center",label:"Action",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"action-btn-group"},[e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(e){return t.openTaiSanForm(!0,a.row)}}},[t._v("Sửa")]),e("el-button",{attrs:{type:1===a.row.trang_thai?"danger":"warning",size:"small",icon:1===a.row.trang_thai?"el-icon-delete":"el-icon-check"},on:{click:function(e){1===a.row.trang_thai?t.handleDisableTaiSan(a.row):t.handleEnableTaiSan(a.row)}}},[t._v(" "+t._s(1===a.row.trang_thai?"Disable":"Enable")+" ")])],1)]}}])})],1),e("div",{staticStyle:{"margin-top":"20px","text-align":"right"}},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper","current-page":t.taiSanDrawer.pagination.page,"page-size":t.taiSanDrawer.pagination.pageSize,total:t.taiSanDrawer.pagination.total},on:{"current-change":t.handleTaiSanPageChange}})],1),t.taiSanDrawer.showForm?e("div",{staticStyle:{"margin-top":"24px",background:"#fafbfc",padding:"24px","border-radius":"8px"}},[e("el-form",{ref:"taiSanForm",attrs:{model:t.taiSanDrawer.formData,rules:t.taiSanDrawer.rules,"label-width":"140px","label-position":"left"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"MST",prop:"mst"}},[e("el-input",{attrs:{placeholder:"MST",clearable:"",readonly:""},model:{value:t.taiSanDrawer.formData.mst,callback:function(a){t.$set(t.taiSanDrawer.formData,"mst",a)},expression:"taiSanDrawer.formData.mst"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Số hiệu TK",prop:"sohieutk"}},[e("el-input",{attrs:{placeholder:"Số hiệu tài khoản",clearable:"",readonly:""},model:{value:t.taiSanDrawer.formData.sohieutk,callback:function(a){t.$set(t.taiSanDrawer.formData,"sohieutk",a)},expression:"taiSanDrawer.formData.sohieutk"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã kho",prop:"ma_kho"}},[e("el-input",{attrs:{placeholder:"Mã kho",clearable:"",readonly:""},model:{value:t.taiSanDrawer.formData.ma_kho,callback:function(a){t.$set(t.taiSanDrawer.formData,"ma_kho",a)},expression:"taiSanDrawer.formData.ma_kho"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã nhóm",prop:"ma_nhom"}},[e("el-input",{attrs:{placeholder:"Mã nhóm",clearable:"",readonly:""},model:{value:t.taiSanDrawer.formData.ma_nhom,callback:function(a){t.$set(t.taiSanDrawer.formData,"ma_nhom",a)},expression:"taiSanDrawer.formData.ma_nhom"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã tài sản",prop:"ma_taisan"}},[e("el-input",{attrs:{placeholder:"Nhập mã tài sản",clearable:""},model:{value:t.taiSanDrawer.formData.ma_taisan,callback:function(a){t.$set(t.taiSanDrawer.formData,"ma_taisan",a)},expression:"taiSanDrawer.formData.ma_taisan"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Tên tài sản",prop:"ten_taisan"}},[e("el-input",{attrs:{placeholder:"Nhập tên tài sản",clearable:""},model:{value:t.taiSanDrawer.formData.ten_taisan,callback:function(a){t.$set(t.taiSanDrawer.formData,"ten_taisan",a)},expression:"taiSanDrawer.formData.ten_taisan"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Đơn vị tính",prop:"dvt"}},[e("el-input",{attrs:{placeholder:"Nhập đơn vị tính",clearable:""},model:{value:t.taiSanDrawer.formData.dvt,callback:function(a){t.$set(t.taiSanDrawer.formData,"dvt",a)},expression:"taiSanDrawer.formData.dvt"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Số thẻ",prop:"so_the"}},[e("el-input",{attrs:{placeholder:"Nhập số thẻ",clearable:""},model:{value:t.taiSanDrawer.formData.so_the,callback:function(a){t.$set(t.taiSanDrawer.formData,"so_the",a)},expression:"taiSanDrawer.formData.so_the"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Ngày lập thẻ",prop:"ngaylap_the"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Chọn ngày"},model:{value:t.taiSanDrawer.formData.ngaylap_the,callback:function(a){t.$set(t.taiSanDrawer.formData,"ngaylap_the",a)},expression:"taiSanDrawer.formData.ngaylap_the"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Hãng tài sản",prop:"hang_taisan"}},[e("el-input",{attrs:{placeholder:"Nhập hãng tài sản",clearable:""},model:{value:t.taiSanDrawer.formData.hang_taisan,callback:function(a){t.$set(t.taiSanDrawer.formData,"hang_taisan",a)},expression:"taiSanDrawer.formData.hang_taisan"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Công suất thiết kế",prop:"congsuat_thietke"}},[e("el-input",{attrs:{placeholder:"Nhập công suất thiết kế",clearable:""},model:{value:t.taiSanDrawer.formData.congsuat_thietke,callback:function(a){t.$set(t.taiSanDrawer.formData,"congsuat_thietke",a)},expression:"taiSanDrawer.formData.congsuat_thietke"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Nước sản xuất",prop:"nuoc_sanxuat"}},[e("el-input",{attrs:{placeholder:"Nhập nước sản xuất",clearable:""},model:{value:t.taiSanDrawer.formData.nuoc_sanxuat,callback:function(a){t.$set(t.taiSanDrawer.formData,"nuoc_sanxuat",a)},expression:"taiSanDrawer.formData.nuoc_sanxuat"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Năm sản xuất",prop:"nam_sanxuat"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1900,max:2100,placeholder:"Năm sản xuất"},model:{value:t.taiSanDrawer.formData.nam_sanxuat,callback:function(a){t.$set(t.taiSanDrawer.formData,"nam_sanxuat",a)},expression:"taiSanDrawer.formData.nam_sanxuat"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Hiện trạng",prop:"hientrang"}},[e("el-input",{attrs:{placeholder:"Nhập hiện trạng",clearable:""},model:{value:t.taiSanDrawer.formData.hientrang,callback:function(a){t.$set(t.taiSanDrawer.formData,"hientrang",a)},expression:"taiSanDrawer.formData.hientrang"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã đơn vị quản lý",prop:"donvi_quanly"}},[e("el-input",{attrs:{placeholder:"Nhập mã đơn vị quản lý",clearable:""},model:{value:t.taiSanDrawer.formData.donvi_quanly,callback:function(a){t.$set(t.taiSanDrawer.formData,"donvi_quanly",a)},expression:"taiSanDrawer.formData.donvi_quanly"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Tên đơn vị quản lý",prop:"ten_donvi_quanly"}},[e("el-input",{attrs:{placeholder:"Nhập tên đơn vị quản lý",clearable:""},model:{value:t.taiSanDrawer.formData.ten_donvi_quanly,callback:function(a){t.$set(t.taiSanDrawer.formData,"ten_donvi_quanly",a)},expression:"taiSanDrawer.formData.ten_donvi_quanly"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Nguồn vốn",prop:"nguonvon"}},[e("el-input",{attrs:{placeholder:"Nhập nguồn vốn",clearable:""},model:{value:t.taiSanDrawer.formData.nguonvon,callback:function(a){t.$set(t.taiSanDrawer.formData,"nguonvon",a)},expression:"taiSanDrawer.formData.nguonvon"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Số biên bản bàn giao",prop:"so_bienban_bangiao"}},[e("el-input",{attrs:{placeholder:"Nhập số biên bản bàn giao",clearable:""},model:{value:t.taiSanDrawer.formData.so_bienban_bangiao,callback:function(a){t.$set(t.taiSanDrawer.formData,"so_bienban_bangiao",a)},expression:"taiSanDrawer.formData.so_bienban_bangiao"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Ngày biên bản bàn giao",prop:"ngay_bienban_bangiao"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Chọn ngày"},model:{value:t.taiSanDrawer.formData.ngay_bienban_bangiao,callback:function(a){t.$set(t.taiSanDrawer.formData,"ngay_bienban_bangiao",a)},expression:"taiSanDrawer.formData.ngay_bienban_bangiao"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Ngày điều chỉnh",prop:"ngay_dieuchinh"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Chọn ngày"},model:{value:t.taiSanDrawer.formData.ngay_dieuchinh,callback:function(a){t.$set(t.taiSanDrawer.formData,"ngay_dieuchinh",a)},expression:"taiSanDrawer.formData.ngay_dieuchinh"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Lý do điều chỉnh",prop:"lydo_dieuchinh"}},[e("el-input",{attrs:{placeholder:"Nhập lý do điều chỉnh",clearable:""},model:{value:t.taiSanDrawer.formData.lydo_dieuchinh,callback:function(a){t.$set(t.taiSanDrawer.formData,"lydo_dieuchinh",a)},expression:"taiSanDrawer.formData.lydo_dieuchinh"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Số năm phân bổ",prop:"so_nam_phanbo"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:t.taiSanDrawer.formData.so_nam_phanbo,callback:function(a){t.$set(t.taiSanDrawer.formData,"so_nam_phanbo",a)},expression:"taiSanDrawer.formData.so_nam_phanbo"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Kỳ phân bổ",prop:"ky_phanbo"}},[e("el-input",{attrs:{placeholder:"Nhập kỳ phân bổ",clearable:""},model:{value:t.taiSanDrawer.formData.ky_phanbo,callback:function(a){t.$set(t.taiSanDrawer.formData,"ky_phanbo",a)},expression:"taiSanDrawer.formData.ky_phanbo"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Trạng thái",prop:"trang_thai"}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"Hoạt động","inactive-text":"Ngừng hoạt động"},model:{value:t.taiSanDrawer.formData.trang_thai,callback:function(a){t.$set(t.taiSanDrawer.formData,"trang_thai",a)},expression:"taiSanDrawer.formData.trang_thai"}})],1)],1)],1),e("el-form-item",{attrs:{label:"Số lượng đầu kỳ",prop:"soluong_dauky"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:t.taiSanDrawer.formData.soluong_dauky,callback:function(a){t.$set(t.taiSanDrawer.formData,"soluong_dauky",a)},expression:"taiSanDrawer.formData.soluong_dauky"}})],1),e("el-form-item",{attrs:{label:"Nguyên giá",prop:"nguyengia"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:t.taiSanDrawer.formData.nguyengia,callback:function(a){t.$set(t.taiSanDrawer.formData,"nguyengia",a)},expression:"taiSanDrawer.formData.nguyengia"}})],1),e("el-form-item",{attrs:{label:"Hao mòn lũy kế",prop:"haomon_luyke"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:t.taiSanDrawer.formData.haomon_luyke,callback:function(a){t.$set(t.taiSanDrawer.formData,"haomon_luyke",a)},expression:"taiSanDrawer.formData.haomon_luyke"}})],1),e("el-form-item",{attrs:{label:"Giá trị còn lại",prop:"giatri_conlai"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:t.taiSanDrawer.formData.giatri_conlai,callback:function(a){t.$set(t.taiSanDrawer.formData,"giatri_conlai",a)},expression:"taiSanDrawer.formData.giatri_conlai"}})],1)],1),e("div",{staticStyle:{"text-align":"left","margin-top":"16px"}},[e("el-button",{on:{click:t.closeTaiSanForm}},[t._v("Hủy")]),e("el-button",{attrs:{type:"primary",loading:t.taiSanDrawer.formLoading},on:{click:t.submitTaiSanForm}},[t._v(" "+t._s(t.taiSanDrawer.isEdit?"Cập nhật":"Thêm mới")+" ")])],1)],1):t._e()],1)])],1)},w=[],k="https://klktaccouting.onrender.com/api",D={name:"NhomHangList",props:{selectedKho:Object,selectedNhom:Object},data:function(){return{nhomList:[],loading:!1,searchQuery:"",pagination:{page:1,pageSize:10,total:0},editingKey:null,editForm:{},editMode:"",isAdding:!1,vatTuDrawer:{visible:!1,ten_nhom:"",ma_nhom:"",ma_kho:"",mst:"",sohieutk:"",searchQuery:"",materials:[],loading:!1,pagination:{page:1,pageSize:10,total:0},isEdit:!1,currentRecord:{},showForm:!1,formData:{mst:"",sohieutk:"",ma_kho:"",ma_nhom:"",ma_vattu:"",ten_vattu:"",dvt:"",luong_dau_ky:0,gia_tri_dau_ky:0,he_so_quy_doi:0,ma_don_vi_quy_doi:"",vi_tri_luu_tru:"",nam:(new Date).getFullYear(),ghi_chu:"",trang_thai:1},rules:{ma_vattu:[{required:!0,message:"Vui lòng nhập mã vật tư",trigger:"blur"}],ten_vattu:[{required:!0,message:"Vui lòng nhập tên vật tư",trigger:"blur"}],dvt:[{required:!0,message:"Vui lòng nhập đơn vị tính",trigger:"blur"}]},formLoading:!1},taiSanDrawer:{visible:!1,ten_nhom:"",ma_nhom:"",ma_kho:"",mst:"",sohieutk:"",searchQuery:"",assets:[],loading:!1,pagination:{page:1,pageSize:10,total:0},isEdit:!1,currentRecord:{},showForm:!1,formData:{mst:"",sohieutk:"",ma_kho:"",ma_nhom:"",ma_taisan:"",ten_taisan:"",dvt:"",so_the:"",ngaylap_the:"",hang_taisan:"",congsuat_thietke:"",nuoc_sanxuat:"",nam_sanxuat:(new Date).getFullYear(),hientrang:"",donvi_quanly:"",ten_donvi_quanly:"",nguonvon:"",so_bienban_bangiao:"",ngay_bienban_bangiao:"",ngay_dieuchinh:"",lydo_dieuchinh:"",soluong_dauky:0,nguyengia:0,haomon_luyke:0,giatri_conlai:0,so_nam_phanbo:0,ky_phanbo:"",trang_thai:1},rules:{ma_taisan:[{required:!0,message:"Vui lòng nhập mã tài sản",trigger:"blur"}],ten_taisan:[{required:!0,message:"Vui lòng nhập tên tài sản",trigger:"blur"}],dvt:[{required:!0,message:"Vui lòng nhập đơn vị tính",trigger:"blur"}]},formLoading:!1}}},computed:{tableDataWithAddRow:function(){var t={_isAddRow:!0};return this.isAdding?[].concat(Object(u["a"])(this.nhomList),[this.editForm]):[].concat(Object(u["a"])(this.nhomList),[t])}},watch:{selectedKho:{immediate:!0,handler:function(t){this.pagination.page=1,this.nhomList=[],this.pagination.total=0,this.cancelEdit(),t&&this.fetchNhomHang()}}},mounted:function(){},methods:{fetchNhomHang:function(){var t=this;return Object(c["a"])(Object(l["a"])().m((function a(){var e,n;return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:if(t.selectedKho){a.n=1;break}return a.a(2);case 1:return t.loading=!0,a.p=2,e={table_code:"tbldmnhomhang",sohieutk:t.selectedKho.sohieutk||"",ma_kho:t.selectedKho.ma_kho||"",mst:t.selectedKho.mst||"",ma_nhom:t.searchQuery||"",ten_nhom:t.searchQuery||"",page:t.pagination.page,size:t.pagination.pageSize},a.n=3,h["a"].post("".concat(k,"/dm/search"),e);case 3:n=a.v,t.nhomList=n.data&&n.data.items?n.data.items:[],t.pagination.total=n.data&&n.data.total?n.data.total:0,a.n=5;break;case 4:a.p=4,a.v,t.nhomList=[],t.pagination.total=0,t.$message&&t.$message.error("Lỗi tải danh sách nhóm hàng");case 5:return a.p=5,t.loading=!1,a.f(5);case 6:return a.a(2)}}),a,null,[[2,4,5,6]])})))()},handleSearch:function(){this.pagination.page=1,this.fetchNhomHang()},handlePageChange:function(t){this.pagination.page=t,this.fetchNhomHang()},indexMethod:function(t){return(this.pagination.page-1)*this.pagination.pageSize+t+1},rowClassName:function(t){var a=t.row;return this.selectedNhom&&a.ma_nhom===this.selectedNhom.ma_nhom?"selected-row":""},isEditing:function(t){return this.editingKey===t.ma_nhom||this.isAdding&&t===this.editForm},startEdit:function(t){this.editingKey=t.ma_nhom,this.editMode="edit",this.editForm=Object(s["a"])({},t)},startAdd:function(){var t=Object(m["b"])();this.editingKey="__add__",this.editMode="add",this.isAdding=!0,this.editForm={mst:t.user.user.taxCode,sohieutk:this.selectedKho.sohieutk,ma_kho:this.selectedKho.ma_kho,ma_nhom:"",ten_nhom:"",trang_thai:1}},saveEdit:function(t){var a=this;return Object(c["a"])(Object(l["a"])().m((function t(){var e;return Object(l["a"])().w((function(t){while(1)switch(t.n){case 0:if(a.editForm.ma_nhom&&a.editForm.sohieutk&&a.editForm.ten_nhom){t.n=1;break}return a.$message.error("Vui lòng nhập đủ thông tin"),t.a(2);case 1:return t.p=1,e=Object(s["a"])(Object(s["a"])({},a.editForm),{},{table_code:"tbldmnhomhang"}),t.n=2,h["a"].post("".concat(k,"/dm/upsert"),e);case 2:a.$message.success("add"===a.editMode?"Thêm mới thành công":"Cập nhật thành công"),a.cancelEdit(),a.fetchNhomHang(),t.n=4;break;case 3:t.p=3,t.v,a.$message.error("Lỗi lưu nhóm hàng");case 4:return t.a(2)}}),t,null,[[1,3]])})))()},cancelEdit:function(){this.editingKey=null,this.editForm={},this.editMode="",this.isAdding=!1},deleteRow:function(t){var a=this;return Object(c["a"])(Object(l["a"])().m((function e(){var n,r;return Object(l["a"])().w((function(e){while(1)switch(e.n){case 0:return e.p=0,e.n=1,a.$confirm('Bạn có chắc chắn muốn xóa nhóm hàng "'.concat(t.ten_nhom,'" (').concat(t.ma_nhom,")?"),"Xác nhận xóa",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning",confirmButtonClass:"el-button--danger"});case 1:return n={table_code:"tbldmnhomhang",mst:t.mst,sohieutk:t.sohieutk,ma_kho:t.ma_kho,ma_nhom:t.ma_nhom},e.n=2,h["a"].post("".concat(k,"/dm/delete"),n);case 2:a.$message.success("Xóa thành công"),a.fetchNhomHang(),e.n=4;break;case 3:e.p=3,r=e.v,"cancel"!==r&&a.$message.error("Lỗi xóa nhóm hàng");case 4:return e.a(2)}}),e,null,[[0,3]])})))()},goToAddVatTu:function(t){this.$router.push({path:"/dm-vatu-hanghoa",query:{ma_kho:t.ma_kho,ma_nhom:t.ma_nhom,sohieutk:t.sohieutk,mst:t.mst,openAdd:1}})},goToAddTaiSan:function(t){this.$router.push({path:"/dm-taisan-hanghoa",query:{ma_kho:t.ma_kho,ma_nhom:t.ma_nhom,sohieutk:t.sohieutk,mst:t.mst,openAdd:1}})},openVatTuDrawer:function(t){this.vatTuDrawer.visible=!0,this.vatTuDrawer.ten_nhom=t.ten_nhom,this.vatTuDrawer.ma_nhom=t.ma_nhom,this.vatTuDrawer.ma_kho=t.ma_kho,this.vatTuDrawer.mst=t.mst,this.vatTuDrawer.sohieutk=t.sohieutk,this.vatTuDrawer.searchQuery="",this.vatTuDrawer.pagination.page=1,this.vatTuDrawer.showForm=!1,this.fetchVatTu()},closeVatTuDrawer:function(){this.vatTuDrawer.visible=!1,this.vatTuDrawer.showForm=!1},fetchVatTu:function(){var t=this;return Object(c["a"])(Object(l["a"])().m((function a(){var e,n;return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:return t.vatTuDrawer.loading=!0,a.p=1,e={table_code:"tbldmvattu_hanghoa",mst:t.vatTuDrawer.mst,sohieutk:t.vatTuDrawer.sohieutk,ma_kho:t.vatTuDrawer.ma_kho,ma_nhom:t.vatTuDrawer.ma_nhom,ma_vattu:t.vatTuDrawer.searchQuery||void 0,ten_vattu:t.vatTuDrawer.searchQuery||void 0,page:t.vatTuDrawer.pagination.page,pageSize:t.vatTuDrawer.pagination.pageSize},a.n=2,h["a"].post("".concat(k,"/dm/search"),e);case 2:n=a.v,t.vatTuDrawer.materials=n.data&&n.data.items?n.data.items:[],t.vatTuDrawer.pagination.total=n.data&&n.data.total?n.data.total:0,a.n=4;break;case 3:a.p=3,a.v,t.vatTuDrawer.materials=[],t.vatTuDrawer.pagination.total=0,t.$message.error("Lỗi tải danh sách vật tư");case 4:return a.p=4,t.vatTuDrawer.loading=!1,a.f(4);case 5:return a.a(2)}}),a,null,[[1,3,4,5]])})))()},handleVatTuPageChange:function(t){this.vatTuDrawer.pagination.page=t,this.fetchVatTu()},openVatTuForm:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.vatTuDrawer.isEdit=t,this.vatTuDrawer.formData=t&&a?{mst:a.mst||"",sohieutk:a.sohieutk||"",ma_kho:a.ma_kho||"",ma_nhom:a.ma_nhom||"",ma_vattu:a.ma_vattu||"",ten_vattu:a.ten_vattu||"",dvt:a.dvt||"",luong_dau_ky:a.luong_dau_ky||0,gia_tri_dau_ky:a.gia_tri_dau_ky||0,he_so_quy_doi:a.he_so_quy_doi||0,ma_don_vi_quy_doi:a.ma_don_vi_quy_doi||"",vi_tri_luu_tru:a.vi_tri_luu_tru||"",nam:a.nam||(new Date).getFullYear(),ghi_chu:a.ghi_chu||"",trang_thai:null!=a.trang_thai?a.trang_thai:1}:{mst:this.vatTuDrawer.mst||"",sohieutk:this.vatTuDrawer.sohieutk||"",ma_kho:this.vatTuDrawer.ma_kho||"",ma_nhom:this.vatTuDrawer.ma_nhom||"",ma_vattu:"",ten_vattu:"",dvt:"",luong_dau_ky:0,gia_tri_dau_ky:0,he_so_quy_doi:0,ma_don_vi_quy_doi:"",vi_tri_luu_tru:"",nam:(new Date).getFullYear(),ghi_chu:"",trang_thai:1},this.vatTuDrawer.showForm=!0},closeVatTuForm:function(){this.vatTuDrawer.showForm=!1,this.$refs.vatTuForm&&this.$refs.vatTuForm.resetFields()},submitVatTuForm:function(){var t=this;return Object(c["a"])(Object(l["a"])().m((function a(){return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:t.$refs.vatTuForm.validate(function(){var a=Object(c["a"])(Object(l["a"])().m((function a(e){var n;return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:if(e){a.n=1;break}return a.a(2);case 1:return t.vatTuDrawer.formLoading=!0,a.p=2,n=Object(s["a"])({table_code:"tbldmvattu_hanghoa"},t.vatTuDrawer.formData),a.n=3,h["a"].post("".concat(k,"/dm/upsert"),n);case 3:return t.$message.success(t.vatTuDrawer.isEdit?"Cập nhật thành công":"Thêm mới thành công"),t.vatTuDrawer.showForm=!1,a.n=4,t.fetchVatTu();case 4:a.n=6;break;case 5:a.p=5,a.v,t.$message.error("Có lỗi xảy ra khi lưu dữ liệu");case 6:return a.p=6,t.vatTuDrawer.formLoading=!1,a.f(6);case 7:return a.a(2)}}),a,null,[[2,5,6,7]])})));return function(t){return a.apply(this,arguments)}}());case 1:return a.a(2)}}),a)})))()},handleDisableVatTu:function(t){var a=this;return Object(c["a"])(Object(l["a"])().m((function e(){var n,r;return Object(l["a"])().w((function(e){while(1)switch(e.n){case 0:return e.p=0,e.n=1,a.$confirm('Bạn có chắc chắn muốn vô hiệu hóa vật tư "'.concat(t.ten_vattu,'" (').concat(t.ma_vattu,")?"),"Xác nhận vô hiệu hóa",{confirmButtonText:"Vô hiệu hóa",cancelButtonText:"Hủy",type:"warning",confirmButtonClass:"el-button--danger"});case 1:return a.vatTuDrawer.loading=!0,n={table_code:"tbldmvattu_hanghoa",mst:t.mst,sohieutk:t.sohieutk,ma_kho:t.ma_kho,ma_nhom:t.ma_nhom,ma_vattu:t.ma_vattu,trang_thai:0},e.n=2,h["a"].post("".concat(k,"/dm/update-status"),n);case 2:return a.$message.success("Vô hiệu hóa vật tư thành công"),e.n=3,a.fetchVatTu();case 3:e.n=5;break;case 4:e.p=4,r=e.v,"cancel"!==r&&a.$message.error("Có lỗi xảy ra khi vô hiệu hóa vật tư");case 5:return e.p=5,a.vatTuDrawer.loading=!1,e.f(5);case 6:return e.a(2)}}),e,null,[[0,4,5,6]])})))()},handleEnableVatTu:function(t){var a=this;return Object(c["a"])(Object(l["a"])().m((function e(){var n,r;return Object(l["a"])().w((function(e){while(1)switch(e.n){case 0:return e.p=0,e.n=1,a.$confirm('Bạn có chắc chắn muốn kích hoạt vật tư "'.concat(t.ten_vattu,'" (').concat(t.ma_vattu,")?"),"Xác nhận kích hoạt",{confirmButtonText:"Kích hoạt",cancelButtonText:"Hủy",type:"warning",confirmButtonClass:"el-button--success"});case 1:return a.vatTuDrawer.loading=!0,n={table_code:"tbldmvattu_hanghoa",mst:t.mst,sohieutk:t.sohieutk,ma_kho:t.ma_kho,ma_nhom:t.ma_nhom,ma_vattu:t.ma_vattu,trang_thai:1},e.n=2,h["a"].post("".concat(k,"/dm/update-status"),n);case 2:return a.$message.success("Kích hoạt vật tư thành công"),e.n=3,a.fetchVatTu();case 3:e.n=5;break;case 4:e.p=4,r=e.v,"cancel"!==r&&a.$message.error("Có lỗi xảy ra khi kích hoạt vật tư");case 5:return e.p=5,a.vatTuDrawer.loading=!1,e.f(5);case 6:return e.a(2)}}),e,null,[[0,4,5,6]])})))()},openTaiSanDrawer:function(t){this.taiSanDrawer.visible=!0,this.taiSanDrawer.ten_nhom=t.ten_nhom,this.taiSanDrawer.ma_nhom=t.ma_nhom,this.taiSanDrawer.ma_kho=t.ma_kho,this.taiSanDrawer.mst=t.mst,this.taiSanDrawer.sohieutk=t.sohieutk,this.taiSanDrawer.searchQuery="",this.taiSanDrawer.pagination.page=1,this.taiSanDrawer.showForm=!1,this.fetchTaiSan()},closeTaiSanDrawer:function(){this.taiSanDrawer.visible=!1,this.taiSanDrawer.showForm=!1},fetchTaiSan:function(){var t=this;return Object(c["a"])(Object(l["a"])().m((function a(){var e,n;return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:return t.taiSanDrawer.loading=!0,a.p=1,e={table_code:"tbldmtaisan",mst:t.taiSanDrawer.mst,sohieutk:t.taiSanDrawer.sohieutk,ma_kho:t.taiSanDrawer.ma_kho,ma_nhom:t.taiSanDrawer.ma_nhom,ma_taisan:t.taiSanDrawer.searchQuery||void 0,ten_taisan:t.taiSanDrawer.searchQuery||void 0,page:t.taiSanDrawer.pagination.page,pageSize:t.taiSanDrawer.pagination.pageSize},a.n=2,h["a"].post("".concat(k,"/dm/search"),e);case 2:n=a.v,t.taiSanDrawer.assets=n.data&&n.data.items?n.data.items:[],t.taiSanDrawer.pagination.total=n.data&&n.data.total?n.data.total:0,a.n=4;break;case 3:a.p=3,a.v,t.taiSanDrawer.assets=[],t.taiSanDrawer.pagination.total=0,t.$message.error("Lỗi tải danh sách tài sản");case 4:return a.p=4,t.taiSanDrawer.loading=!1,a.f(4);case 5:return a.a(2)}}),a,null,[[1,3,4,5]])})))()},handleTaiSanPageChange:function(t){this.taiSanDrawer.pagination.page=t,this.fetchTaiSan()},openTaiSanForm:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.taiSanDrawer.isEdit=t,this.taiSanDrawer.formData=t&&a?{mst:a.mst||"",sohieutk:a.sohieutk||"",ma_kho:a.ma_kho||"",ma_nhom:a.ma_nhom||"",ma_taisan:a.ma_taisan||"",ten_taisan:a.ten_taisan||"",dvt:a.dvt||"",so_the:a.so_the||"",ngaylap_the:a.ngaylap_the||"",hang_taisan:a.hang_taisan||"",congsuat_thietke:a.congsuat_thietke||"",nuoc_sanxuat:a.nuoc_sanxuat||"",nam_sanxuat:a.nam_sanxuat||(new Date).getFullYear(),hientrang:a.hientrang||"",donvi_quanly:a.donvi_quanly||"",ten_donvi_quanly:a.ten_donvi_quanly||"",nguonvon:a.nguonvon||"",so_bienban_bangiao:a.so_bienban_bangiao||"",ngay_bienban_bangiao:a.ngay_bienban_bangiao||"",ngay_dieuchinh:a.ngay_dieuchinh||"",lydo_dieuchinh:a.lydo_dieuchinh||"",soluong_dauky:a.soluong_dauky||0,nguyengia:a.nguyengia||0,haomon_luyke:a.haomon_luyke||0,giatri_conlai:a.giatri_conlai||0,so_nam_phanbo:a.so_nam_phanbo||0,ky_phanbo:a.ky_phanbo||"",trang_thai:null!=a.trang_thai?a.trang_thai:1}:{mst:this.taiSanDrawer.mst||"",sohieutk:this.taiSanDrawer.sohieutk||"",ma_kho:this.taiSanDrawer.ma_kho||"",ma_nhom:this.taiSanDrawer.ma_nhom||"",ma_taisan:"",ten_taisan:"",dvt:"",so_the:"",ngaylap_the:"",hang_taisan:"",congsuat_thietke:"",nuoc_sanxuat:"",nam_sanxuat:(new Date).getFullYear(),hientrang:"",donvi_quanly:"",ten_donvi_quanly:"",nguonvon:"",so_bienban_bangiao:"",ngay_bienban_bangiao:"",ngay_dieuchinh:"",lydo_dieuchinh:"",soluong_dauky:0,nguyengia:0,haomon_luyke:0,giatri_conlai:0,so_nam_phanbo:0,ky_phanbo:"",trang_thai:1},this.taiSanDrawer.showForm=!0},closeTaiSanForm:function(){this.taiSanDrawer.showForm=!1,this.$refs.taiSanForm&&this.$refs.taiSanForm.resetFields()},submitTaiSanForm:function(){var t=this;return Object(c["a"])(Object(l["a"])().m((function a(){return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:t.$refs.taiSanForm.validate(function(){var a=Object(c["a"])(Object(l["a"])().m((function a(e){var n;return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:if(e){a.n=1;break}return a.a(2);case 1:return t.taiSanDrawer.formLoading=!0,a.p=2,n=Object(s["a"])({table_code:"tbldmtaisan"},t.taiSanDrawer.formData),a.n=3,h["a"].post("".concat(k,"/dm/upsert"),n);case 3:return t.$message.success(t.taiSanDrawer.isEdit?"Cập nhật thành công":"Thêm mới thành công"),t.taiSanDrawer.showForm=!1,a.n=4,t.fetchTaiSan();case 4:a.n=6;break;case 5:a.p=5,a.v,t.$message.error("Có lỗi xảy ra khi lưu dữ liệu");case 6:return a.p=6,t.taiSanDrawer.formLoading=!1,a.f(6);case 7:return a.a(2)}}),a,null,[[2,5,6,7]])})));return function(t){return a.apply(this,arguments)}}());case 1:return a.a(2)}}),a)})))()},handleDisableTaiSan:function(t){var a=this;return Object(c["a"])(Object(l["a"])().m((function e(){var n,r;return Object(l["a"])().w((function(e){while(1)switch(e.n){case 0:return e.p=0,e.n=1,a.$confirm('Bạn có chắc chắn muốn vô hiệu hóa tài sản "'.concat(t.ten_taisan,'" (').concat(t.ma_taisan,")?"),"Xác nhận vô hiệu hóa",{confirmButtonText:"Vô hiệu hóa",cancelButtonText:"Hủy",type:"warning",confirmButtonClass:"el-button--danger"});case 1:return a.taiSanDrawer.loading=!0,n={table_code:"tbldmtaisan",mst:t.mst,sohieutk:t.sohieutk,ma_kho:t.ma_kho,ma_nhom:t.ma_nhom,ma_taisan:t.ma_taisan,trang_thai:0},e.n=2,h["a"].post("".concat(k,"/dm/update-status"),n);case 2:return a.$message.success("Vô hiệu hóa tài sản thành công"),e.n=3,a.fetchTaiSan();case 3:e.n=5;break;case 4:e.p=4,r=e.v,"cancel"!==r&&a.$message.error("Có lỗi xảy ra khi vô hiệu hóa tài sản");case 5:return e.p=5,a.taiSanDrawer.loading=!1,e.f(5);case 6:return e.a(2)}}),e,null,[[0,4,5,6]])})))()},handleEnableTaiSan:function(t){var a=this;return Object(c["a"])(Object(l["a"])().m((function e(){var n,r;return Object(l["a"])().w((function(e){while(1)switch(e.n){case 0:return e.p=0,e.n=1,a.$confirm('Bạn có chắc chắn muốn kích hoạt tài sản "'.concat(t.ten_taisan,'" (').concat(t.ma_taisan,")?"),"Xác nhận kích hoạt",{confirmButtonText:"Kích hoạt",cancelButtonText:"Hủy",type:"warning",confirmButtonClass:"el-button--success"});case 1:return a.taiSanDrawer.loading=!0,n={table_code:"tbldmtaisan",mst:t.mst,sohieutk:t.sohieutk,ma_kho:t.ma_kho,ma_nhom:t.ma_nhom,ma_taisan:t.ma_taisan,trang_thai:1},e.n=2,h["a"].post("".concat(k,"/dm/update-status"),n);case 2:return a.$message.success("Kích hoạt tài sản thành công"),e.n=3,a.fetchTaiSan();case 3:e.n=5;break;case 4:e.p=4,r=e.v,"cancel"!==r&&a.$message.error("Có lỗi xảy ra khi kích hoạt tài sản");case 5:return e.p=5,a.taiSanDrawer.loading=!1,e.f(5);case 6:return e.a(2)}}),e,null,[[0,4,5,6]])})))()},formatNumber:function(t){return null===t||void 0===t?"":new Intl.NumberFormat("vi-VN").format(t)},formatCurrency:function(t){return null===t||void 0===t?"":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t)},formatDate:function(t){if(!t)return"";var a=new Date(t);return isNaN(a.getTime())?"":a.toLocaleDateString("vi-VN")}}},y=D,S=(e("cbb6"),Object(_["a"])(y,v,w,!1,null,"ec750f48",null)),T=S.exports,x=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-dialog",{attrs:{visible:t.visible,title:t.isEdit?"Sửa kho hàng":"Thêm kho hàng",width:"520px","close-on-click-modal":!1,"destroy-on-close":!0,"append-to-body":!0},on:{"update:visible":function(a){t.visible=a},close:function(a){return t.$emit("close")}}},[e("el-form",{ref:"formRef",attrs:{model:t.form,rules:t.rules,"label-width":"120px","label-position":"left"}},[e("el-row",{attrs:{gutter:16}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"MST",prop:"mst"}},[e("el-input",{attrs:{maxlength:"15",readonly:"",placeholder:"Mã số thuế"},model:{value:t.form.mst,callback:function(a){t.$set(t.form,"mst",a)},expression:"form.mst"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Số hiệu TK",prop:"sohieutk"}},[e("el-input",{attrs:{maxlength:"10",placeholder:"VD: 152, 153..."},model:{value:t.form.sohieutk,callback:function(a){t.$set(t.form,"sohieutk",a)},expression:"form.sohieutk"}})],1)],1)],1),e("el-row",{attrs:{gutter:16}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã kho",prop:"ma_kho"}},[e("el-input",{attrs:{maxlength:"10",disabled:t.isEdit,placeholder:"Nhập mã kho"},model:{value:t.form.ma_kho,callback:function(a){t.$set(t.form,"ma_kho",a)},expression:"form.ma_kho"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Tên kho",prop:"ten_kho"}},[e("el-input",{attrs:{maxlength:"100",placeholder:"Nhập tên kho"},model:{value:t.form.ten_kho,callback:function(a){t.$set(t.form,"ten_kho",a)},expression:"form.ten_kho"}})],1)],1)],1),e("el-form-item",{attrs:{label:"Trạng thái",prop:"trang_thai"}},[e("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-text":"Hoạt động","inactive-text":"Vô hiệu"},model:{value:t.form.trang_thai,callback:function(a){t.$set(t.form,"trang_thai",a)},expression:"form.trang_thai"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){return t.$emit("close")}}},[t._v("Hủy")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("Lưu")])],1)],1)},$=[],F="https://klktaccouting.onrender.com/api",N={name:"KhoHangForm",props:{visible:Boolean,isEdit:Boolean,khoData:Object},data:function(){return{form:{mst:"",sohieutk:"",ma_kho:"",ten_kho:"",trang_thai:1},rules:{mst:[{required:!0,message:"Nhập MST",trigger:"blur"}],sohieutk:[{required:!0,message:"Nhập số hiệu TK",trigger:"blur"}],ma_kho:[{required:!0,message:"Nhập mã kho",trigger:"blur"}],ten_kho:[{required:!0,message:"Nhập tên kho",trigger:"blur"}]}}},watch:{khoData:{immediate:!0,handler:function(t){var a=Object(m["b"])();this.form=t?Object(s["a"])(Object(s["a"])({},t),{},{mst:a.user.user.taxCode}):{mst:a.user.user.taxCode,sohieutk:"",ma_kho:"",ten_kho:"",trang_thai:1}}},visible:function(t){t||this.$refs.formRef&&this.$refs.formRef.resetFields()}},methods:{handleSubmit:function(){var t=this;this.$refs.formRef.validate(function(){var a=Object(c["a"])(Object(l["a"])().m((function a(e){var n;return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:if(e){a.n=1;break}return a.a(2);case 1:return a.p=1,n=Object(s["a"])(Object(s["a"])({},t.form),{},{table_code:"tbldmkhohang"}),a.n=2,h["a"].post("".concat(F,"/dm/upsert"),n);case 2:t.$emit("success"),t.$emit("close"),t.$message.success(t.isEdit?"Cập nhật thành công":"Thêm mới thành công"),a.n=4;break;case 3:a.p=3,a.v,t.$message.error("Lỗi lưu kho hàng");case 4:return a.a(2)}}),a,null,[[1,3]])})));return function(t){return a.apply(this,arguments)}}())}}},C=N,O=(e("ad7b"),Object(_["a"])(C,x,$,!1,null,"450d0e03",null)),j=O.exports,K={name:"DmKhoHang",components:{KhoHangList:b,NhomHangList:T,KhoHangForm:j},data:function(){return{selectedKho:null,selectedNhom:null,khoFormVisible:!1,isEditKho:!1,editingKho:null,topHeightPercent:50,dragging:!1}},methods:{onSelectKho:function(t){this.selectedKho=t,this.selectedNhom=null},onSelectNhom:function(t){this.selectedNhom=t},onAddKho:function(){this.isEditKho=!1,this.editingKho=null,this.khoFormVisible=!0},onEditKho:function(t){this.isEditKho=!0,this.editingKho=t,this.khoFormVisible=!0},onAddNhom:function(){},onEditNhom:function(t){},handleKhoFormSuccess:function(){this.$refs&&this.$refs.khoList&&this.$refs.khoList.fetchKhoHang&&this.$refs.khoList.fetchKhoHang(),this.$refs&&this.$refs.nhomList&&this.$refs.nhomList.fetchNhomHang&&this.$refs.nhomList.fetchNhomHang()},startDrag:function(){this.dragging=!0,window.addEventListener("mousemove",this.onDrag),window.addEventListener("mouseup",this.stopDrag)},onDrag:function(t){if(this.dragging){var a=this.$el.getBoundingClientRect(),e=t.clientY-a.top,n=e/a.height*100;n<20&&(n=20),n>80&&(n=80),this.topHeightPercent=Math.round(n)}},stopDrag:function(){this.dragging&&(this.dragging=!1,window.removeEventListener("mousemove",this.onDrag),window.removeEventListener("mouseup",this.stopDrag))}}},E=K,z=(e("6054"),Object(_["a"])(E,n,r,!1,null,"11b1ec94",null));a["default"]=z.exports},"529b":function(t,a,e){},6054:function(t,a,e){"use strict";e("9b07")},"9b07":function(t,a,e){},ad7b:function(t,a,e){"use strict";e("2964")},afda:function(t,a,e){"use strict";e("529b")},cbb6:function(t,a,e){"use strict";e("f609")},f609:function(t,a,e){}}]);