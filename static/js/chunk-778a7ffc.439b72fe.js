(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-778a7ffc"],{"288c":function(a,t,e){},"55d2":function(a,t,e){"use strict";e("a29c")},7490:function(a,t,e){"use strict";e("288c")},a29c:function(a,t,e){},d361:function(a,t,e){},d934:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"taisan-container"},[e("el-card",[e("div",{staticStyle:{"margin-bottom":"20px",display:"flex",gap:"10px","align-items":"center","justify-content":"space-between"}},[e("div",{staticStyle:{display:"flex",gap:"10px","align-items":"center"}},[e("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Nhập MST, số hiệu TK hoặc tên tài sản để tìm kiếm",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.handleSearch(t)}},model:{value:a.searchQuery,callback:function(t){a.searchQuery=t},expression:"searchQuery"}}),e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:a.handleSearch}},[a._v("Search")])],1),e("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:a.openCreateDialog}},[a._v("Thêm mới")])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:a.assets,border:"","empty-text":"Không có dữ liệu","max-height":"600"}},[e("el-table-column",{attrs:{label:"STT",type:"index",width:"60",index:a.indexMethod,align:"center"}}),a._e(),e("el-table-column",{attrs:{prop:"sohieutk",label:"Số hiệu TK",width:"120"}}),e("el-table-column",{attrs:{prop:"ma_kho",label:"Mã kho",width:"100"}}),e("el-table-column",{attrs:{prop:"ma_nhom",label:"Mã nhóm",width:"100"}}),e("el-table-column",{attrs:{prop:"ma_taisan",label:"Mã tài sản",width:"120"}}),e("el-table-column",{attrs:{prop:"ten_taisan",label:"Tên tài sản","min-width":"200"}}),e("el-table-column",{attrs:{prop:"dvt",label:"Đơn vị tính",width:"100"}}),e("el-table-column",{attrs:{prop:"so_the",label:"Số thẻ",width:"120"}}),e("el-table-column",{attrs:{prop:"ngaylap_the",label:"Ngày lập thẻ",width:"120"},scopedSlots:a._u([{key:"default",fn:function(t){return[a._v(" "+a._s(a.formatDate(t.row.ngaylap_the))+" ")]}}])}),e("el-table-column",{attrs:{prop:"hang_taisan",label:"Hãng tài sản",width:"120"}}),e("el-table-column",{attrs:{prop:"congsuat_thietke",label:"Công suất thiết kế",width:"140"}}),e("el-table-column",{attrs:{prop:"nuoc_sanxuat",label:"Nước sản xuất",width:"120"}}),e("el-table-column",{attrs:{prop:"nam_sanxuat",label:"Năm sản xuất",width:"120",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[a._v(" "+a._s(a.formatNumber(t.row.nam_sanxuat))+" ")]}}])}),e("el-table-column",{attrs:{prop:"trang_thai",label:"Trạng thái",width:"100",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-tag",{attrs:{type:1===t.row.trang_thai?"success":"danger"}},[a._v(" "+a._s(1===t.row.trang_thai?"Hoạt động":"Vô hiệu")+" ")])]}}])}),e("el-table-column",{attrs:{prop:"donvi_quanly",label:"Mã đơn vị quản lý",width:"140"}}),e("el-table-column",{attrs:{prop:"ten_donvi_quanly",label:"Tên đơn vị quản lý","min-width":"150"}}),e("el-table-column",{attrs:{prop:"nguonvon",label:"Nguồn vốn",width:"120"}}),e("el-table-column",{attrs:{prop:"so_bienban_bangiao",label:"Số biên bản bàn giao",width:"150"}}),e("el-table-column",{attrs:{prop:"ngay_bienban_bangiao",label:"Ngày biên bản bàn giao",width:"150"},scopedSlots:a._u([{key:"default",fn:function(t){return[a._v(" "+a._s(a.formatDate(t.row.ngay_bienban_bangiao))+" ")]}}])}),e("el-table-column",{attrs:{prop:"ngay_dieuchinh",label:"Ngày điều chỉnh",width:"120"},scopedSlots:a._u([{key:"default",fn:function(t){return[a._v(" "+a._s(a.formatDate(t.row.ngay_dieuchinh))+" ")]}}])}),e("el-table-column",{attrs:{prop:"lydo_dieuchinh",label:"Lý do điều chỉnh",width:"140"}}),e("el-table-column",{attrs:{prop:"soluong_dauky",label:"Số lượng đầu kỳ",width:"130",align:"right"},scopedSlots:a._u([{key:"default",fn:function(t){return[a._v(" "+a._s(a.formatNumber(t.row.soluong_dauky))+" ")]}}])}),e("el-table-column",{attrs:{prop:"nguyengia",label:"Nguyên giá",width:"120",align:"right"},scopedSlots:a._u([{key:"default",fn:function(t){return[a._v(" "+a._s(a.formatCurrency(t.row.nguyengia))+" ")]}}])}),e("el-table-column",{attrs:{prop:"haomon_luyke",label:"Hao mòn lũy kế",width:"140",align:"right"},scopedSlots:a._u([{key:"default",fn:function(t){return[a._v(" "+a._s(a.formatCurrency(t.row.haomon_luyke))+" ")]}}])}),e("el-table-column",{attrs:{prop:"giatri_conlai",label:"Giá trị còn lại",width:"130",align:"right"},scopedSlots:a._u([{key:"default",fn:function(t){return[a._v(" "+a._s(a.formatCurrency(t.row.giatri_conlai))+" ")]}}])}),e("el-table-column",{attrs:{prop:"so_nam_phanbo",label:"Số năm phân bổ",width:"130",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[a._v(" "+a._s(a.formatNumber(t.row.so_nam_phanbo))+" ")]}}])}),e("el-table-column",{attrs:{prop:"ky_phanbo",label:"Kỳ phân bổ",width:"100"}}),e("el-table-column",{attrs:{prop:"sothang_phanbo",label:"Số tháng phân bổ",width:"140",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[a._v(" "+a._s(a.formatNumber(t.row.sothang_phanbo))+" ")]}}])}),e("el-table-column",{attrs:{prop:"taikhoan_phanbo",label:"TK phân bổ",width:"120"}}),e("el-table-column",{attrs:{prop:"ma_kho_ct",label:"Mã kho CT",width:"100"}}),e("el-table-column",{attrs:{prop:"ma_nhom_ct",label:"Mã nhóm CT",width:"100"}}),e("el-table-column",{attrs:{prop:"chitiet_taikhoan_phanbo",label:"Chi tiết TK phân bổ",width:"150"}}),e("el-table-column",{attrs:{prop:"congdoan_sanxuat",label:"Công đoạn sản xuất",width:"150"}}),e("el-table-column",{attrs:{align:"center",label:"Action",width:"280",fixed:"right"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-info"},on:{click:function(e){return a.openDetailDialog(t.row)}}},[a._v("Detail")]),e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(e){return a.openEditDialog(t.row)}}},[a._v("Edit")]),e("el-button",{attrs:{type:1===t.row.trang_thai?"danger":"warning",size:"small",icon:1===t.row.trang_thai?"el-icon-delete":"el-icon-check"},on:{click:function(e){1===t.row.trang_thai?a.handleDisable(t.row):a.handleEnable(t.row)}}},[a._v(a._s(1===t.row.trang_thai?"Disable":"Enable"))])]}}])})],1),e("div",{staticStyle:{"margin-top":"20px","text-align":"right"}},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper","current-page":a.pagination.page,"page-size":a.pagination.pageSize,total:a.pagination.total},on:{"current-change":a.handlePageChange}})],1)],1),e("AssetForm",{attrs:{visible:a.formDialog.visible,"is-edit":a.formDialog.isEdit,"asset-data":a.formDialog.assetData},on:{"update:visible":function(t){return a.$set(a.formDialog,"visible",t)},success:a.handleFormSuccess,close:a.handleFormClose}}),e("AssetDetail",{attrs:{visible:a.detailDialog.visible,"asset-data":a.detailDialog.assetData},on:{"update:visible":function(t){return a.$set(a.detailDialog,"visible",t)},close:a.handleDetailClose}})],1)},s=[],l=e("5530"),o=e("c14f"),i=e("1da1"),r=(e("99af"),e("b775")),c=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("el-dialog",{attrs:{title:a.isEdit?"Chỉnh sửa tài sản":"Thêm mới tài sản",visible:a.dialogVisible,width:"1100px","before-close":a.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){a.dialogVisible=t}}},[e("el-form",{ref:"form",attrs:{model:a.formData,rules:a.rules,"label-width":"180px","label-position":"left"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"MST",prop:"mst"}},[e("el-input",{attrs:{placeholder:"Nhập MST",clearable:"",disabled:a.isEdit},model:{value:a.formData.mst,callback:function(t){a.$set(a.formData,"mst",t)},expression:"formData.mst"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Số hiệu TK",prop:"sohieutk"}},[e("el-input",{attrs:{placeholder:"Nhập số hiệu tài khoản",clearable:"",disabled:a.isEdit},model:{value:a.formData.sohieutk,callback:function(t){a.$set(a.formData,"sohieutk",t)},expression:"formData.sohieutk"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã kho",prop:"ma_kho"}},[e("el-input",{attrs:{placeholder:"Nhập mã kho",maxlength:"10",clearable:"",disabled:a.isEdit},model:{value:a.formData.ma_kho,callback:function(t){a.$set(a.formData,"ma_kho",t)},expression:"formData.ma_kho"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã nhóm",prop:"ma_nhom"}},[e("el-input",{attrs:{placeholder:"Nhập mã nhóm",maxlength:"20",clearable:"",disabled:a.isEdit},model:{value:a.formData.ma_nhom,callback:function(t){a.$set(a.formData,"ma_nhom",t)},expression:"formData.ma_nhom"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã tài sản",prop:"ma_taisan"}},[e("el-input",{attrs:{placeholder:"Nhập mã tài sản",clearable:"",disabled:a.isEdit},model:{value:a.formData.ma_taisan,callback:function(t){a.$set(a.formData,"ma_taisan",t)},expression:"formData.ma_taisan"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Tên tài sản",prop:"ten_taisan"}},[e("el-input",{attrs:{placeholder:"Nhập tên tài sản",clearable:""},model:{value:a.formData.ten_taisan,callback:function(t){a.$set(a.formData,"ten_taisan",t)},expression:"formData.ten_taisan"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Đơn vị tính",prop:"dvt"}},[e("el-input",{attrs:{placeholder:"Nhập đơn vị tính",clearable:""},model:{value:a.formData.dvt,callback:function(t){a.$set(a.formData,"dvt",t)},expression:"formData.dvt"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Số thẻ",prop:"so_the"}},[e("el-input",{attrs:{placeholder:"Nhập số thẻ",clearable:""},model:{value:a.formData.so_the,callback:function(t){a.$set(a.formData,"so_the",t)},expression:"formData.so_the"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Ngày lập thẻ",prop:"ngaylap_the"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Chọn ngày"},model:{value:a.formData.ngaylap_the,callback:function(t){a.$set(a.formData,"ngaylap_the",t)},expression:"formData.ngaylap_the"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Hãng tài sản",prop:"hang_taisan"}},[e("el-input",{attrs:{placeholder:"Nhập hãng tài sản",clearable:""},model:{value:a.formData.hang_taisan,callback:function(t){a.$set(a.formData,"hang_taisan",t)},expression:"formData.hang_taisan"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Công suất thiết kế",prop:"congsuat_thietke"}},[e("el-input",{attrs:{placeholder:"Nhập công suất thiết kế",clearable:""},model:{value:a.formData.congsuat_thietke,callback:function(t){a.$set(a.formData,"congsuat_thietke",t)},expression:"formData.congsuat_thietke"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Nước sản xuất",prop:"nuoc_sanxuat"}},[e("el-input",{attrs:{placeholder:"Nhập nước sản xuất",clearable:""},model:{value:a.formData.nuoc_sanxuat,callback:function(t){a.$set(a.formData,"nuoc_sanxuat",t)},expression:"formData.nuoc_sanxuat"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Năm sản xuất",prop:"nam_sanxuat"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1900,max:2100,placeholder:"Năm sản xuất"},model:{value:a.formData.nam_sanxuat,callback:function(t){a.$set(a.formData,"nam_sanxuat",t)},expression:"formData.nam_sanxuat"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Hiện trạng",prop:"hientrang"}},[e("el-input",{attrs:{placeholder:"Nhập hiện trạng",clearable:""},model:{value:a.formData.hientrang,callback:function(t){a.$set(a.formData,"hientrang",t)},expression:"formData.hientrang"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Mã đơn vị quản lý",prop:"donvi_quanly"}},[e("el-input",{attrs:{placeholder:"Nhập mã đơn vị quản lý",clearable:""},model:{value:a.formData.donvi_quanly,callback:function(t){a.$set(a.formData,"donvi_quanly",t)},expression:"formData.donvi_quanly"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Tên đơn vị quản lý",prop:"ten_donvi_quanly"}},[e("el-input",{attrs:{placeholder:"Nhập tên đơn vị quản lý",clearable:""},model:{value:a.formData.ten_donvi_quanly,callback:function(t){a.$set(a.formData,"ten_donvi_quanly",t)},expression:"formData.ten_donvi_quanly"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Nguồn vốn",prop:"nguonvon"}},[e("el-input",{attrs:{placeholder:"Nhập nguồn vốn",clearable:""},model:{value:a.formData.nguonvon,callback:function(t){a.$set(a.formData,"nguonvon",t)},expression:"formData.nguonvon"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Số biên bản bàn giao",prop:"so_bienban_bangiao"}},[e("el-input",{attrs:{placeholder:"Nhập số biên bản bàn giao",clearable:""},model:{value:a.formData.so_bienban_bangiao,callback:function(t){a.$set(a.formData,"so_bienban_bangiao",t)},expression:"formData.so_bienban_bangiao"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Ngày biên bản bàn giao",prop:"ngay_bienban_bangiao"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Chọn ngày"},model:{value:a.formData.ngay_bienban_bangiao,callback:function(t){a.$set(a.formData,"ngay_bienban_bangiao",t)},expression:"formData.ngay_bienban_bangiao"}})],1)],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Ngày điều chỉnh",prop:"ngay_dieuchinh"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Chọn ngày"},model:{value:a.formData.ngay_dieuchinh,callback:function(t){a.$set(a.formData,"ngay_dieuchinh",t)},expression:"formData.ngay_dieuchinh"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Lý do điều chỉnh",prop:"lydo_dieuchinh"}},[e("el-input",{attrs:{placeholder:"Nhập lý do điều chỉnh",clearable:""},model:{value:a.formData.lydo_dieuchinh,callback:function(t){a.$set(a.formData,"lydo_dieuchinh",t)},expression:"formData.lydo_dieuchinh"}})],1)],1)],1),e("el-form-item",{attrs:{label:"Số lượng đầu kỳ",prop:"soluong_dauky"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:a.formData.soluong_dauky,callback:function(t){a.$set(a.formData,"soluong_dauky",t)},expression:"formData.soluong_dauky"}})],1),e("el-form-item",{attrs:{label:"Nguyên giá",prop:"nguyengia"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:a.formData.nguyengia,callback:function(t){a.$set(a.formData,"nguyengia",t)},expression:"formData.nguyengia"}})],1),e("el-form-item",{attrs:{label:"Hao mòn lũy kế",prop:"haomon_luyke"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:a.formData.haomon_luyke,callback:function(t){a.$set(a.formData,"haomon_luyke",t)},expression:"formData.haomon_luyke"}})],1),e("el-form-item",{attrs:{label:"Giá trị còn lại",prop:"giatri_conlai"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:a.formData.giatri_conlai,callback:function(t){a.$set(a.formData,"giatri_conlai",t)},expression:"formData.giatri_conlai"}})],1),e("el-form-item",{attrs:{label:"Số năm phân bổ",prop:"so_nam_phanbo"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:a.formData.so_nam_phanbo,callback:function(t){a.$set(a.formData,"so_nam_phanbo",t)},expression:"formData.so_nam_phanbo"}})],1),e("el-form-item",{attrs:{label:"Kỳ phân bổ",prop:"ky_phanbo"}},[e("el-input",{attrs:{placeholder:"Nhập kỳ phân bổ",clearable:""},model:{value:a.formData.ky_phanbo,callback:function(t){a.$set(a.formData,"ky_phanbo",t)},expression:"formData.ky_phanbo"}})],1),e("el-form-item",{attrs:{label:"Số tháng phân bổ",prop:"sothang_phanbo"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"0"},model:{value:a.formData.sothang_phanbo,callback:function(t){a.$set(a.formData,"sothang_phanbo",t)},expression:"formData.sothang_phanbo"}})],1),e("el-form-item",{attrs:{label:"TK phân bổ",prop:"taikhoan_phanbo"}},[e("el-input",{attrs:{placeholder:"Nhập TK phân bổ",clearable:""},model:{value:a.formData.taikhoan_phanbo,callback:function(t){a.$set(a.formData,"taikhoan_phanbo",t)},expression:"formData.taikhoan_phanbo"}})],1),e("el-form-item",{attrs:{label:"Chi tiết TK phân bổ",prop:"chitiet_taikhoan_phanbo"}},[e("el-input",{attrs:{placeholder:"Nhập chi tiết TK phân bổ",clearable:""},model:{value:a.formData.chitiet_taikhoan_phanbo,callback:function(t){a.$set(a.formData,"chitiet_taikhoan_phanbo",t)},expression:"formData.chitiet_taikhoan_phanbo"}})],1),e("el-form-item",{attrs:{label:"Công đoạn sản xuất",prop:"congdoan_sanxuat"}},[e("el-input",{attrs:{placeholder:"Nhập công đoạn sản xuất",clearable:""},model:{value:a.formData.congdoan_sanxuat,callback:function(t){a.$set(a.formData,"congdoan_sanxuat",t)},expression:"formData.congdoan_sanxuat"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:a.handleClose}},[a._v("Hủy")]),e("el-button",{attrs:{type:"primary",loading:a.loading},on:{click:a.handleSubmit}},[a._v(" "+a._s(a.isEdit?"Cập nhật":"Thêm mới")+" ")])],1)],1)},u=[],m=(e("d3b7"),e("0643"),e("4e3e"),e("159b"),"https://klktaccouting.onrender.com/api"),h={name:"AssetForm",props:{visible:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},assetData:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,formData:{mst:"",sohieutk:"",ma_taisan:"",ten_taisan:"",dvt:"",so_the:"",ngaylap_the:"",hang_taisan:"",congsuat_thietke:"",nuoc_sanxuat:"",nam_sanxuat:"",hientrang:"",donvi_quanly:"",ten_donvi_quanly:"",nguonvon:"",so_bienban_bangiao:"",ngay_bienban_bangiao:"",ngay_dieuchinh:"",lydo_dieuchinh:"",soluong_dauky:0,nguyengia:0,haomon_luyke:0,giatri_conlai:0,so_nam_phanbo:0,ky_phanbo:"",sothang_phanbo:0,taikhoan_phanbo:"",ma_kho:"",ma_nhom:"",chitiet_taikhoan_phanbo:"",congdoan_sanxuat:"",trang_thai:1},rules:{mst:[{required:!0,message:"Vui lòng nhập MST",trigger:"blur"}],sohieutk:[{required:!0,message:"Vui lòng nhập số hiệu tài khoản",trigger:"blur"}],ma_taisan:[{required:!0,message:"Vui lòng nhập mã tài sản",trigger:"blur"}],ten_taisan:[{required:!0,message:"Vui lòng nhập tên tài sản",trigger:"blur"}],ma_kho:[{required:!0,message:"Vui lòng nhập mã kho",trigger:"blur"}],ma_nhom:[{required:!0,message:"Vui lòng nhập mã nhóm",trigger:"blur"}]}}},computed:{dialogVisible:{get:function(){return this.visible},set:function(a){this.$emit("update:visible",a)}}},watch:{visible:function(a){a&&this.initForm()}},methods:{initForm:function(){this.isEdit&&this.assetData?this.formData=Object(l["a"])(Object(l["a"])(Object(l["a"])({},this.formData),this.assetData),{},{trang_thai:null!=this.assetData.trang_thai?this.assetData.trang_thai:1,ma_kho:this.assetData.ma_kho||"",ma_nhom:this.assetData.ma_nhom||""}):this.resetForm()},resetForm:function(){var a=this;this.formData={mst:"",sohieutk:"",ma_taisan:"",ten_taisan:"",dvt:"",so_the:"",ngaylap_the:"",hang_taisan:"",congsuat_thietke:"",nuoc_sanxuat:"",nam_sanxuat:"",hientrang:"",donvi_quanly:"",ten_donvi_quanly:"",nguonvon:"",so_bienban_bangiao:"",ngay_bienban_bangiao:"",ngay_dieuchinh:"",lydo_dieuchinh:"",soluong_dauky:0,nguyengia:0,haomon_luyke:0,giatri_conlai:0,so_nam_phanbo:0,ky_phanbo:"",sothang_phanbo:0,taikhoan_phanbo:"",ma_kho:"",ma_nhom:"",chitiet_taikhoan_phanbo:"",congdoan_sanxuat:"",trang_thai:1},this.$nextTick((function(){a.$refs.form&&a.$refs.form.clearValidate()}))},handleSubmit:function(){var a=this;return Object(i["a"])(Object(o["a"])().m((function t(){var e,n,s;return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:return t.p=0,t.n=1,a.$refs.form.validate();case 1:if(e=t.v,e){t.n=2;break}return t.a(2);case 2:if(a.loading=!0,n=Object(l["a"])({table_code:"tbldmtaisan"},a.formData),s=["trang_thai"],s.forEach((function(t){n[t]=a.formData[t]?1:0})),!a.isEdit){t.n=4;break}return n.id=a.assetData.id,t.n=3,r["a"].post("".concat(m,"/dm/upsert"),n);case 3:t.n=5;break;case 4:return t.n=5,r["a"].post("".concat(m,"/dm/upsert"),n);case 5:a.$emit("success",a.formData),a.dialogVisible=!1,t.n=7;break;case 6:t.p=6,t.v,a.$message.error("Có lỗi xảy ra khi lưu dữ liệu");case 7:return t.p=7,a.loading=!1,t.f(7);case 8:return t.a(2)}}),t,null,[[0,6,7,8]])})))()},handleClose:function(){this.dialogVisible=!1,this.$emit("close")}}},d=h,p=(e("55d2"),e("2877")),b=Object(p["a"])(d,c,u,!1,null,"7e1b8d35",null),_=b.exports,f=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("el-dialog",{attrs:{title:"Chi tiết tài sản",visible:a.dialogVisible,width:"1000px","before-close":a.handleClose},on:{"update:visible":function(t){a.dialogVisible=t}}},[a.assetData?e("div",{staticClass:"asset-detail-form"},[e("div",{staticClass:"section-title"},[a._v("Thông tin chung")]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("MST:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.mst||"N/A"))]),e("div",{staticClass:"form-label"},[a._v("Số hiệu TK:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.sohieutk||"N/A"))])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Mã tài sản:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.ma_taisan||"N/A"))]),e("div",{staticClass:"form-label"},[a._v("Tên tài sản:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.ten_taisan||"N/A"))])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Đơn vị tính:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.dvt||"N/A"))]),e("div",{staticClass:"form-label"},[a._v("Số thẻ:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.so_the||"N/A"))])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Ngày lập thẻ:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.formatDate(a.assetData.ngaylap_the)))]),e("div",{staticClass:"form-label"},[a._v("Hãng tài sản:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.hang_taisan||"N/A"))])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Công suất thiết kế:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.congsuat_thietke||"N/A"))]),e("div",{staticClass:"form-label"},[a._v("Nước sản xuất:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.nuoc_sanxuat||"N/A"))])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Năm sản xuất:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.nam_sanxuat||"N/A"))]),e("div",{staticClass:"form-label"},[a._v("Hiện trạng:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.hientrang||"N/A"))])]),e("div",{staticClass:"section-title"},[a._v("Thông tin quản lý")]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Mã đơn vị quản lý:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.donvi_quanly||"N/A"))]),e("div",{staticClass:"form-label"},[a._v("Tên đơn vị quản lý:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.ten_donvi_quanly||"N/A"))])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Nguồn vốn:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.nguonvon||"N/A"))])]),e("div",{staticClass:"section-title"},[a._v("Thông tin bàn giao/điều chỉnh")]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Số biên bản bàn giao:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.so_bienban_bangiao||"N/A"))]),e("div",{staticClass:"form-label"},[a._v("Ngày biên bản bàn giao:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.formatDate(a.assetData.ngay_bienban_bangiao)))])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Ngày điều chỉnh:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.formatDate(a.assetData.ngay_dieuchinh)))]),e("div",{staticClass:"form-label"},[a._v("Lý do điều chỉnh:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.lydo_dieuchinh||"N/A"))])]),e("div",{staticClass:"section-title"},[a._v("Thông tin kế toán")]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Số lượng đầu kỳ:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.formatNumber(a.assetData.soluong_dauky)))]),e("div",{staticClass:"form-label"},[a._v("Nguyên giá:")]),e("div",{staticClass:"form-value amount"},[a._v(a._s(a.formatCurrency(a.assetData.nguyengia)))])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Hao mòn lũy kế:")]),e("div",{staticClass:"form-value amount"},[a._v(a._s(a.formatCurrency(a.assetData.haomon_luyke)))]),e("div",{staticClass:"form-label"},[a._v("Giá trị còn lại:")]),e("div",{staticClass:"form-value amount"},[a._v(a._s(a.formatCurrency(a.assetData.giatri_conlai)))])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Số năm phân bổ:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.formatNumber(a.assetData.so_nam_phanbo)))]),e("div",{staticClass:"form-label"},[a._v("Kỳ phân bổ:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.ky_phanbo||"N/A"))])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Số tháng phân bổ:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.formatNumber(a.assetData.sothang_phanbo)))]),e("div",{staticClass:"form-label"},[a._v("TK phân bổ:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.taikhoan_phanbo||"N/A"))])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Mã kho CT:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.ma_kho_ct||"N/A"))]),e("div",{staticClass:"form-label"},[a._v("Mã nhóm CT:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.ma_nhom_ct||"N/A"))])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-label"},[a._v("Chi tiết TK phân bổ:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.chitiet_taikhoan_phanbo||"N/A"))]),e("div",{staticClass:"form-label"},[a._v("Công đoạn sản xuất:")]),e("div",{staticClass:"form-value"},[a._v(a._s(a.assetData.congdoan_sanxuat||"N/A"))])])]):e("div",{staticClass:"loading-container"},[e("el-empty",{attrs:{description:"Không có dữ liệu"}})],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:a.handleClose}},[a._v("Đóng")])],1)])},g=[],v={name:"AssetDetail",props:{visible:{type:Boolean,default:!1},assetData:{type:Object,default:function(){return{}}}},computed:{dialogVisible:{get:function(){return this.visible},set:function(a){this.$emit("update:visible",a)}}},methods:{formatCurrency:function(a){return null===a||void 0===a?"0 VND":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a)},formatNumber:function(a){return null===a||void 0===a?"":new Intl.NumberFormat("vi-VN").format(a)},formatDate:function(a){if(!a)return"N/A";var t=new Date(a);return t.toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},handleClose:function(){this.$emit("close")}}},D=v,y=(e("7490"),Object(p["a"])(D,f,g,!1,null,"1eb903ab",null)),k=y.exports,C="https://klktaccouting.onrender.com/api",w={name:"DmTaiSanList",components:{AssetForm:_,AssetDetail:k},data:function(){return{searchQuery:"",assets:[],loading:!1,pagination:{page:1,pageSize:10,total:0},formDialog:{visible:!1,isEdit:!1,assetData:{}},detailDialog:{visible:!1,assetData:{}}}},methods:{fetchAssets:function(){var a=this;return Object(i["a"])(Object(o["a"])().m((function t(){var e,n,s;return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:return a.loading=!0,t.p=1,e={table_code:"tbldmtaisan",mst:a.searchQuery||void 0,sohieutk:a.searchQuery||void 0,ten_taisan:a.searchQuery||void 0,page:a.pagination.page,pageSize:a.pagination.pageSize},t.n=2,r["a"].post("".concat(C,"/dm/search"),e);case 2:n=t.v,console.log("API result:",n),a.assets=n.data.items||[],a.pagination.total=n.data.total||0,t.n=4;break;case 3:t.p=3,s=t.v,console.error("Error fetching data:",s),a.assets=[],a.pagination.total=0,a.$message.error("Có lỗi xảy ra khi tải dữ liệu");case 4:return t.p=4,a.loading=!1,t.f(4);case 5:return t.a(2)}}),t,null,[[1,3,4,5]])})))()},handleSearch:function(){this.pagination.page=1,this.fetchAssets()},handlePageChange:function(a){this.pagination.page=a,this.fetchAssets()},indexMethod:function(a){return(this.pagination.page-1)*this.pagination.pageSize+a+1},formatDate:function(a){return a?new Date(a).toLocaleDateString("vi-VN"):""},formatNumber:function(a){return null===a||void 0===a?"":new Intl.NumberFormat("vi-VN").format(a)},formatCurrency:function(a){return null===a||void 0===a?"":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a)},openCreateDialog:function(){this.formDialog={visible:!0,isEdit:!1,assetData:{}}},openEditDialog:function(a){this.formDialog={visible:!0,isEdit:!0,assetData:Object(l["a"])({},a)}},openDetailDialog:function(a){this.detailDialog={visible:!0,assetData:Object(l["a"])({},a)}},handleFormSuccess:function(){this.fetchAssets(),this.formDialog.visible=!1},handleFormClose:function(){this.formDialog.visible=!1},handleDetailClose:function(){this.detailDialog.visible=!1},handleDisable:function(a){var t=this;return Object(i["a"])(Object(o["a"])().m((function e(){var n,s;return Object(o["a"])().w((function(e){while(1)switch(e.n){case 0:return e.p=0,e.n=1,t.$confirm('Bạn có chắc chắn muốn vô hiệu hóa tài khoản chi tiết "'.concat(a.ma_nhom,'" (').concat(a.ma_taisan,")?"),"Xác nhận vô hiệu hóa",{confirmButtonText:"Vô hiệu hóa",cancelButtonText:"Hủy",type:"warning",confirmButtonClass:"el-button--danger"});case 1:return t.loading=!0,n={table_code:"tbldmtaisan",mst:a.mst,sohieutk:a.sohieutk,ma_kho:a.ma_kho,ma_nhom:a.ma_nhom,ma_taisan:a.ma_taisan,trang_thai:0},e.n=2,r["a"].post("".concat(C,"/dm/update-status"),n);case 2:t.$message.success("Vô hiệu tài sản thành công"),t.fetchAssets(),e.n=4;break;case 3:e.p=3,s=e.v,"cancel"!==s&&(console.error("Error disabling account detail:",s),t.$message.error("Có lỗi xảy ra khi vô hiệu hóa tài sản"));case 4:return e.p=4,t.loading=!1,e.f(4);case 5:return e.a(2)}}),e,null,[[0,3,4,5]])})))()},handleEnable:function(a){var t=this;return Object(i["a"])(Object(o["a"])().m((function e(){var n,s;return Object(o["a"])().w((function(e){while(1)switch(e.n){case 0:return e.p=0,e.n=1,t.$confirm('Bạn có chắc chắn muốn kích hoạt tài sản "'.concat(a.ma_nhom,'" (').concat(a.ma_taisan,")?"),"Xác nhận kích hoạt",{confirmButtonText:"Kích hoạt",cancelButtonText:"Hủy",type:"warning",confirmButtonClass:"el-button--success"});case 1:return t.loading=!0,n={table_code:"tbldmtaisan",mst:a.mst,sohieutk:a.sohieutk,ma_kho:a.ma_kho,ma_nhom:a.ma_nhom,ma_taisan:a.ma_taisan,trang_thai:1},e.n=2,r["a"].post("".concat(C,"/dm/update-status"),n);case 2:t.$message.success("Kích hoạt tài sản thành công"),t.fetchAssets(),e.n=4;break;case 3:e.p=3,s=e.v,"cancel"!==s&&(console.error("Error enabling account detail:",s),t.$message.error("Có lỗi xảy ra khi kích hoạt tài sản"));case 4:return e.p=4,t.loading=!1,e.f(4);case 5:return e.a(2)}}),e,null,[[0,3,4,5]])})))()}},created:function(){this.fetchAssets()}},x=w,N=(e("fe8d"),Object(p["a"])(x,n,s,!1,null,"8a53598e",null));t["default"]=N.exports},fe8d:function(a,t,e){"use strict";e("d361")}}]);