(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28c47d5f"],{"064e":function(t,e,a){},2518:function(t,e,a){"use strict";a("c27d")},6842:function(t,e,a){"use strict";a("064e")},9175:function(t,e,a){},c27d:function(t,e,a){},df35:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"khachhang-container"},[a("el-card",[a("div",{staticStyle:{"margin-bottom":"20px",display:"flex",gap:"10px","align-items":"center","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex",gap:"10px","align-items":"center"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Nhập MST, MST KH NCC hoặc tên công ty để tìm kiếm",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch(e)}},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("Search")])],1),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.openCreateDialog}},[t._v("Thêm mới")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.customers,border:"","empty-text":"Không có dữ liệu","max-height":"600"}},[a("el-table-column",{attrs:{label:"STT",type:"index",width:"60",index:t.indexMethod,align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"120"}}),t._e(),a("el-table-column",{attrs:{prop:"mst_kh_ncc",label:"MST KH NCC",width:"120"}}),a("el-table-column",{attrs:{prop:"ten_congty",label:"Tên công ty","min-width":"200"}}),a("el-table-column",{attrs:{prop:"du_no",label:"Dư nợ",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatCurrency(e.row.du_no))+" ")]}}])}),a("el-table-column",{attrs:{prop:"du_co",label:"Dư có",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatCurrency(e.row.du_co))+" ")]}}])}),a("el-table-column",{attrs:{prop:"dia_chi",label:"Địa chỉ","min-width":"150"}}),a("el-table-column",{attrs:{prop:"huyen",label:"Huyện",width:"100"}}),a("el-table-column",{attrs:{prop:"tinh",label:"Tỉnh",width:"100"}}),a("el-table-column",{attrs:{prop:"dien_thoai",label:"Điện thoại",width:"120"}}),a("el-table-column",{attrs:{prop:"ten_giamdoc",label:"Tên giám đốc",width:"120"}}),a("el-table-column",{attrs:{prop:"ten_ketoan",label:"Tên kế toán",width:"120"}}),a("el-table-column",{attrs:{prop:"linh_vuc_kd",label:"Lĩnh vực KD","min-width":"150"}}),a("el-table-column",{attrs:{prop:"khach_hang",label:"Khách hàng",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{attrs:{disabled:1!==e.row.trang_thai},on:{change:function(a){return t.handleCheckboxChange(e.row,"khach_hang",a)}},model:{value:e.row.khach_hang,callback:function(a){t.$set(e.row,"khach_hang",a)},expression:"scope.row.khach_hang"}})]}}])}),a("el-table-column",{attrs:{prop:"nha_cungcap",label:"Nhà cung cấp",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{attrs:{disabled:1!==e.row.trang_thai},on:{change:function(a){return t.handleCheckboxChange(e.row,"nha_cungcap",a)}},model:{value:e.row.nha_cungcap,callback:function(a){t.$set(e.row,"nha_cungcap",a)},expression:"scope.row.nha_cungcap"}})]}}])}),a("el-table-column",{attrs:{prop:"tai_khoan",label:"Tài khoản",width:"120"}}),a("el-table-column",{attrs:{prop:"ngan_hang",label:"Ngân hàng","min-width":"150"}}),a("el-table-column",{attrs:{prop:"cap",label:"Cấp",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatNumber(e.row.cap))+" ")]}}])}),a("el-table-column",{attrs:{prop:"trang_thai",label:"Trạng thái",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:1===e.row.trang_thai?"success":"danger"}},[t._v(" "+t._s(1===e.row.trang_thai?"Hoạt động":"Vô hiệu")+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"Action",width:"280",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-info"},on:{click:function(a){return t.openDetailDialog(e.row)}}},[t._v("Detail")]),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(a){return t.openEditDialog(e.row)}}},[t._v("Edit")]),a("el-button",{attrs:{type:1===e.row.trang_thai?"danger":"warning",size:"small",icon:1===e.row.trang_thai?"el-icon-delete":"el-icon-check"},on:{click:function(a){1===e.row.trang_thai?t.handleDisable(e.row):t.handleEnable(e.row)}}},[t._v(t._s(1===e.row.trang_thai?"Disable":"Enable"))])]}}])})],1),a("div",{staticStyle:{"margin-top":"20px","text-align":"right"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper","current-page":t.pagination.page,"page-size":t.pagination.pageSize,total:t.pagination.total},on:{"current-change":t.handlePageChange}})],1)],1),a("CustomerForm",{attrs:{visible:t.formDialog.visible,"is-edit":t.formDialog.isEdit,"customer-data":t.formDialog.customerData},on:{"update:visible":function(e){return t.$set(t.formDialog,"visible",e)},success:t.handleFormSuccess,close:t.handleFormClose}}),a("CustomerDetail",{attrs:{visible:t.detailDialog.visible,"customer-data":t.detailDialog.customerData},on:{"update:visible":function(e){return t.$set(t.detailDialog,"visible",e)},close:t.handleDetailClose}})],1)},o=[],i=a("5530"),s=a("c14f"),r=a("1da1"),l=(a("99af"),a("b775")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.isEdit?"Chỉnh sửa khách hàng":"Thêm mới khách hàng",visible:t.dialogVisible,width:"800px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"customerForm",attrs:{model:t.form,rules:t.rules,"label-width":"140px","label-position":"left"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"MST",prop:"mst"}},[a("el-input",{attrs:{placeholder:"Nhập MST"},model:{value:t.form.mst,callback:function(e){t.$set(t.form,"mst",e)},expression:"form.mst"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"MST KH NCC",prop:"mst_kh_ncc"}},[a("el-input",{attrs:{placeholder:"Nhập MST KH NCC"},model:{value:t.form.mst_kh_ncc,callback:function(e){t.$set(t.form,"mst_kh_ncc",e)},expression:"form.mst_kh_ncc"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"Tên công ty",prop:"ten_congty"}},[a("el-input",{attrs:{placeholder:"Nhập tên công ty"},model:{value:t.form.ten_congty,callback:function(e){t.$set(t.form,"ten_congty",e)},expression:"form.ten_congty"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Dư nợ",prop:"du_no"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{precision:0,step:1e3,placeholder:"Nhập dư nợ"},model:{value:t.form.du_no,callback:function(e){t.$set(t.form,"du_no",e)},expression:"form.du_no"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Dư có",prop:"du_co"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{precision:0,step:1e3,placeholder:"Nhập dư có"},model:{value:t.form.du_co,callback:function(e){t.$set(t.form,"du_co",e)},expression:"form.du_co"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"Địa chỉ",prop:"dia_chi"}},[a("el-input",{attrs:{placeholder:"Nhập địa chỉ"},model:{value:t.form.dia_chi,callback:function(e){t.$set(t.form,"dia_chi",e)},expression:"form.dia_chi"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Huyện",prop:"huyen"}},[a("el-input",{attrs:{placeholder:"Nhập huyện"},model:{value:t.form.huyen,callback:function(e){t.$set(t.form,"huyen",e)},expression:"form.huyen"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Tỉnh",prop:"tinh"}},[a("el-input",{attrs:{placeholder:"Nhập tỉnh"},model:{value:t.form.tinh,callback:function(e){t.$set(t.form,"tinh",e)},expression:"form.tinh"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Điện thoại",prop:"dien_thoai"}},[a("el-input",{attrs:{placeholder:"Nhập số điện thoại"},model:{value:t.form.dien_thoai,callback:function(e){t.$set(t.form,"dien_thoai",e)},expression:"form.dien_thoai"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Tên giám đốc",prop:"ten_giamdoc"}},[a("el-input",{attrs:{placeholder:"Nhập tên giám đốc"},model:{value:t.form.ten_giamdoc,callback:function(e){t.$set(t.form,"ten_giamdoc",e)},expression:"form.ten_giamdoc"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Tên kế toán",prop:"ten_ketoan"}},[a("el-input",{attrs:{placeholder:"Nhập tên kế toán"},model:{value:t.form.ten_ketoan,callback:function(e){t.$set(t.form,"ten_ketoan",e)},expression:"form.ten_ketoan"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Lĩnh vực KD",prop:"linh_vuc_kd"}},[a("el-input",{attrs:{placeholder:"Nhập lĩnh vực kinh doanh"},model:{value:t.form.linh_vuc_kd,callback:function(e){t.$set(t.form,"linh_vuc_kd",e)},expression:"form.linh_vuc_kd"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Khách hàng",prop:"khach_hang"}},[a("el-switch",{attrs:{"active-text":"Có","inactive-text":"Không"},model:{value:t.form.khach_hang,callback:function(e){t.$set(t.form,"khach_hang",e)},expression:"form.khach_hang"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Nhà cung cấp",prop:"nha_cungcap"}},[a("el-switch",{attrs:{"active-text":"Có","inactive-text":"Không"},model:{value:t.form.nha_cungcap,callback:function(e){t.$set(t.form,"nha_cungcap",e)},expression:"form.nha_cungcap"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Tài khoản",prop:"tai_khoan"}},[a("el-input",{attrs:{placeholder:"Nhập tài khoản"},model:{value:t.form.tai_khoan,callback:function(e){t.$set(t.form,"tai_khoan",e)},expression:"form.tai_khoan"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Ngân hàng",prop:"ngan_hang"}},[a("el-input",{attrs:{placeholder:"Nhập tên ngân hàng"},model:{value:t.form.ngan_hang,callback:function(e){t.$set(t.form,"ngan_hang",e)},expression:"form.ngan_hang"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Cấp",prop:"cap"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:10,placeholder:"Nhập cấp"},model:{value:t.form.cap,callback:function(e){t.$set(t.form,"cap",e)},expression:"form.cap"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("Hủy")]),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleSubmit}},[t._v(" "+t._s(t.isEdit?"Cập nhật":"Thêm mới")+" ")])],1)],1)},u=[],h="https://klktaccouting.onrender.com/api",m={name:"CustomerForm",props:{visible:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},customerData:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,form:{mst:"",mst_kh_ncc:"",ten_congty:"",du_no:0,du_co:0,dia_chi:"",huyen:"",tinh:"",dien_thoai:"",ten_giamdoc:"",ten_ketoan:"",linh_vuc_kd:"",khach_hang:!1,nha_cungcap:!1,tai_khoan:"",ngan_hang:"",cap:1},rules:{mst:[{required:!0,message:"Vui lòng nhập MST",trigger:"blur"}],ten_congty:[{required:!0,message:"Vui lòng nhập tên công ty",trigger:"blur"}],dia_chi:[{required:!0,message:"Vui lòng nhập địa chỉ",trigger:"blur"}]}}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},watch:{visible:function(t){t&&this.initForm()}},methods:{initForm:function(){this.isEdit&&this.customerData?this.form=Object(i["a"])(Object(i["a"])({},this.customerData),{},{khach_hang:Boolean(this.customerData.khach_hang),nha_cungcap:Boolean(this.customerData.nha_cungcap),du_no:this.customerData.du_no||0,du_co:this.customerData.du_co||0,cap:this.customerData.cap||1}):this.resetForm()},resetForm:function(){var t=this;this.form={mst:"",mst_kh_ncc:"",ten_congty:"",du_no:0,du_co:0,dia_chi:"",huyen:"",tinh:"",dien_thoai:"",ten_giamdoc:"",ten_ketoan:"",linh_vuc_kd:"",khach_hang:!1,nha_cungcap:!1,tai_khoan:"",ngan_hang:"",cap:1},this.$nextTick((function(){t.$refs.customerForm&&t.$refs.customerForm.clearValidate()}))},handleSubmit:function(){var t=this;return Object(r["a"])(Object(s["a"])().m((function e(){var a,n,o;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return e.p=0,e.n=1,t.$refs.customerForm.validate();case 1:if(a=e.v,a){e.n=2;break}return e.a(2);case 2:if(t.loading=!0,n=Object(i["a"])({table_code:"tbldmkhachhang"},t.form),!t.isEdit){e.n=4;break}return n.id=t.customerData.id,e.n=3,l["a"].post("".concat(h,"/dm/upsert"),n);case 3:e.n=5;break;case 4:return e.n=5,l["a"].post("".concat(h,"/dm/upsert"),n);case 5:t.$emit("success",t.form),t.handleClose(),e.n=7;break;case 6:e.p=6,o=e.v,console.error("Error submitting form:",o),t.$message.error("Có lỗi xảy ra khi lưu dữ liệu");case 7:return e.p=7,t.loading=!1,e.f(7);case 8:return e.a(2)}}),e,null,[[0,6,7,8]])})))()},handleClose:function(){this.$emit("close"),this.resetForm()}}},d=m,p=(a("f90d"),a("2877")),f=Object(p["a"])(d,c,u,!1,null,"36e4d89e",null),g=f.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"Chi tiết khách hàng",visible:t.dialogVisible,width:"1000px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"customer-detail-form"},[a("div",{staticClass:"section-title"},[t._v("Thông tin chung")]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-label"},[t._v("ID:")]),a("div",{staticClass:"form-value"},[t._v(t._s(t.customerData.id||"-"))]),a("div",{staticClass:"form-label"},[t._v("MST:")]),a("div",{staticClass:"form-value"},[t._v(t._s(t.customerData.mst||"-"))])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-label"},[t._v("MST KH NCC:")]),a("div",{staticClass:"form-value"},[t._v(t._s(t.customerData.mst_kh_ncc||"-"))]),a("div",{staticClass:"form-label"},[t._v("Tên công ty:")]),a("div",{staticClass:"form-value"},[t._v(t._s(t.customerData.ten_congty||"-"))])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-label"},[t._v("Địa chỉ:")]),a("div",{staticClass:"form-value",staticStyle:{"grid-column":"span 3"}},[t._v(t._s(t.customerData.dia_chi||"-"))])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-label"},[t._v("Huyện:")]),a("div",{staticClass:"form-value"},[t._v(t._s(t.customerData.huyen||"-"))]),a("div",{staticClass:"form-label"},[t._v("Tỉnh:")]),a("div",{staticClass:"form-value"},[t._v(t._s(t.customerData.tinh||"-"))])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-label"},[t._v("Điện thoại:")]),a("div",{staticClass:"form-value"},[t._v(t._s(t.customerData.dien_thoai||"-"))])]),a("div",{staticClass:"section-title"},[t._v("Thông tin tài chính")]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-label"},[t._v("Dư nợ:")]),a("div",{staticClass:"form-value amount"},[t._v(t._s(t.formatCurrency(t.customerData.du_no)))]),a("div",{staticClass:"form-label"},[t._v("Dư có:")]),a("div",{staticClass:"form-value amount"},[t._v(t._s(t.formatCurrency(t.customerData.du_co)))])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-label"},[t._v("Tài khoản:")]),a("div",{staticClass:"form-value"},[t._v(t._s(t.customerData.tai_khoan||"-"))]),a("div",{staticClass:"form-label"},[t._v("Ngân hàng:")]),a("div",{staticClass:"form-value"},[t._v(t._s(t.customerData.ngan_hang||"-"))])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-label"},[t._v("Cấp:")]),a("div",{staticClass:"form-value"},[t._v(t._s(t.formatNumber(t.customerData.cap)))])]),a("div",{staticClass:"section-title"},[t._v("Thông tin liên hệ")]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-label"},[t._v("Tên giám đốc:")]),a("div",{staticClass:"form-value"},[t._v(t._s(t.customerData.ten_giamdoc||"-"))]),a("div",{staticClass:"form-label"},[t._v("Tên kế toán:")]),a("div",{staticClass:"form-value"},[t._v(t._s(t.customerData.ten_ketoan||"-"))])]),a("div",{staticClass:"section-title"},[t._v("Thông tin khác")]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-label"},[t._v("Lĩnh vực KD:")]),a("div",{staticClass:"form-value",staticStyle:{"grid-column":"span 3"}},[t._v(t._s(t.customerData.linh_vuc_kd||"-"))])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-label"},[t._v("Khách hàng:")]),a("div",{staticClass:"form-value"},[a("el-tag",{attrs:{type:t.customerData.khach_hang?"success":"info",size:"small"}},[t._v(" "+t._s(t.customerData.khach_hang?"Có":"Không")+" ")])],1),a("div",{staticClass:"form-label"},[t._v("Nhà cung cấp:")]),a("div",{staticClass:"form-value"},[a("el-tag",{attrs:{type:t.customerData.nha_cungcap?"success":"info",size:"small"}},[t._v(" "+t._s(t.customerData.nha_cungcap?"Có":"Không")+" ")])],1)]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-label"},[t._v("Trạng thái:")]),a("div",{staticClass:"form-value"},[a("el-tag",{attrs:{type:1===t.customerData.trang_thai?"success":"danger",size:"small"}},[t._v(" "+t._s(1===t.customerData.trang_thai?"Hoạt động":"Vô hiệu")+" ")])],1)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("Đóng")])],1)])},v=[],b={name:"CustomerDetail",props:{visible:{type:Boolean,default:!1},customerData:{type:Object,default:function(){return{}}}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},methods:{formatNumber:function(t){return null===t||void 0===t?"-":new Intl.NumberFormat("vi-VN").format(t)},formatCurrency:function(t){return null===t||void 0===t?"-":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t)},handleClose:function(){this.$emit("close")}}},k=b,C=(a("2518"),Object(p["a"])(k,_,v,!1,null,"08eb079b",null)),w=C.exports,y="https://klktaccouting.onrender.com/api",D={name:"DmKhachHangList",components:{CustomerForm:g,CustomerDetail:w},data:function(){return{searchQuery:"",customers:[],loading:!1,pagination:{page:1,pageSize:10,total:0},formDialog:{visible:!1,isEdit:!1,customerData:{}},detailDialog:{visible:!1,customerData:{}}}},methods:{fetchCustomers:function(){var t=this;return Object(r["a"])(Object(s["a"])().m((function e(){var a,n,o;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return t.loading=!0,e.p=1,a={table_code:"tbldmkhachhang",mst:t.searchQuery||void 0,mst_kh_ncc:t.searchQuery||void 0,ten_congty:t.searchQuery||void 0,page:t.pagination.page,pageSize:t.pagination.pageSize},e.n=2,l["a"].post("".concat(y,"/dm/search"),a);case 2:n=e.v,console.log("API result:",n),t.customers=n.data.items||[],t.pagination.total=n.data.total||0,e.n=4;break;case 3:e.p=3,o=e.v,console.error("Error fetching data:",o),t.customers=[],t.pagination.total=0,t.$message.error("Có lỗi xảy ra khi tải dữ liệu");case 4:return e.p=4,t.loading=!1,e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})))()},handleSearch:function(){this.pagination.page=1,this.fetchCustomers()},handlePageChange:function(t){this.pagination.page=t,this.fetchCustomers()},indexMethod:function(t){return(this.pagination.page-1)*this.pagination.pageSize+t+1},formatNumber:function(t){return null===t||void 0===t?"":new Intl.NumberFormat("vi-VN").format(t)},formatCurrency:function(t){return null===t||void 0===t?"":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t)},openCreateDialog:function(){this.formDialog={visible:!0,isEdit:!1,customerData:{}}},openEditDialog:function(t){this.formDialog={visible:!0,isEdit:!0,customerData:Object(i["a"])({},t)}},handleFormSuccess:function(t){this.fetchCustomers(),this.$message.success(this.formDialog.isEdit?"Cập nhật thành công":"Thêm mới thành công")},handleFormClose:function(){this.formDialog={visible:!1,isEdit:!1,customerData:{}}},openDetailDialog:function(t){this.detailDialog={visible:!0,customerData:Object(i["a"])({},t)}},handleDetailClose:function(){this.detailDialog={visible:!1,customerData:{}}},handleDisable:function(t){var e=this;return Object(r["a"])(Object(s["a"])().m((function a(){var n,o;return Object(s["a"])().w((function(a){while(1)switch(a.n){case 0:return a.p=0,a.n=1,e.$confirm('Bạn có chắc chắn muốn vô hiệu hóa khách hàng "'.concat(t.ten_congty,'" (').concat(t.mst,")?"),"Xác nhận vô hiệu hóa",{confirmButtonText:"Vô hiệu hóa",cancelButtonText:"Hủy",type:"warning",confirmButtonClass:"el-button--danger"});case 1:return e.loading=!0,n={table_code:"tbldmkhachhang",id:t.id,mst:t.mst,trang_thai:0},a.n=2,l["a"].post("".concat(y,"/dm/update-status"),n);case 2:e.$message.success("Vô hiệu hóa khách hàng thành công"),e.fetchCustomers(),a.n=4;break;case 3:a.p=3,o=a.v,"cancel"!==o&&(console.error("Error disabling customer:",o),e.$message.error("Có lỗi xảy ra khi vô hiệu hóa khách hàng"));case 4:return a.p=4,e.loading=!1,a.f(4);case 5:return a.a(2)}}),a,null,[[0,3,4,5]])})))()},handleEnable:function(t){var e=this;return Object(r["a"])(Object(s["a"])().m((function a(){var n,o;return Object(s["a"])().w((function(a){while(1)switch(a.n){case 0:return a.p=0,a.n=1,e.$confirm('Bạn có chắc chắn muốn kích hoạt khách hàng "'.concat(t.ten_congty,'" (').concat(t.mst,")?"),"Xác nhận kích hoạt",{confirmButtonText:"Kích hoạt",cancelButtonText:"Hủy",type:"warning",confirmButtonClass:"el-button--success"});case 1:return e.loading=!0,n={table_code:"tbldmkhachhang",id:t.id,mst:t.mst,trang_thai:1},a.n=2,l["a"].post("".concat(y,"/dm/update-status"),n);case 2:e.$message.success("Kích hoạt khách hàng thành công"),e.fetchCustomers(),a.n=4;break;case 3:a.p=3,o=a.v,"cancel"!==o&&(console.error("Error enabling customer:",o),e.$message.error("Có lỗi xảy ra khi kích hoạt khách hàng"));case 4:return a.p=4,e.loading=!1,a.f(4);case 5:return a.a(2)}}),a,null,[[0,3,4,5]])})))()},handleCheckboxChange:function(t,e,a){var n=this;return Object(r["a"])(Object(s["a"])().m((function o(){var i,r,c,u;return Object(s["a"])().w((function(o){while(1)switch(o.n){case 0:return o.p=0,i={table_code:"tbldmkhachhang",id:t.id,mst:t.mst,mst_kh_ncc:t.mst_kh_ncc,khach_hang:"khach_hang"===e?a:t.khach_hang,nha_cungcap:"nha_cungcap"===e?a:t.nha_cungcap,update_type:"KH-NCC"},o.n=1,l["a"].post("".concat(y,"/dm/update"),i);case 1:r="khach_hang"===e?"khách hàng":"nhà cung cấp",c=a?"kích hoạt":"vô hiệu hóa",n.$message.success("Đã ".concat(c," ").concat(r," thành công")),n.fetchCustomers(),o.n=3;break;case 2:o.p=2,u=o.v,console.error("Error updating checkbox:",u),n.$message.error("Có lỗi xảy ra khi cập nhật trạng thái"),n.$set(t,e,!a);case 3:return o.a(2)}}),o,null,[[0,2]])})))()}},created:function(){this.fetchCustomers()}},x=D,$=(a("6842"),Object(p["a"])(x,n,o,!1,null,"682acc56",null));e["default"]=$.exports},f90d:function(t,e,a){"use strict";a("9175")}}]);